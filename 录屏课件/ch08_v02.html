<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç¬¬8ç«  è§†é¢‘ 8.2 å…¨å¾®åˆ†ã€æ¢¯åº¦ä¸æ–¹å‘å¯¼æ•°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="./assets/noto-serif-sc.css">
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\(', '\)']],
                displayMath: [['$$', '$$'], ['\[', '\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process'
            },
            startup: {
                ready: () => {
                    console.log('âœ… MathJaxå·²åŠ è½½å¹¶é…ç½®å®Œæˆ');
                    MathJax.startup.defaultReady();
                }
            }
        };
    </script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="stylesheet" href="./assets/lesson-template.css">
</head>
<body class="blackboard">
    <div id="statusIndicator" class="status-indicator">ç­‰å¾…è¿æ¥</div>
    <header class="lesson-topbar">
        <div class="lesson-meta">
            <h1>ç¬¬8ç«  è§†é¢‘ 8.2 å…¨å¾®åˆ†ã€æ¢¯åº¦ä¸æ–¹å‘å¯¼æ•°</h1>
            <div class="lesson-meta__row">
                <span class="lesson-chip">ç« èŠ‚ 8.2</span>
                <span class="lesson-chip">é¢„è®¡æ€»æ—¶é•¿ï¼š5 åˆ† 50 ç§’ / 350 ç§’</span>
                <span class="lesson-chip">å…± 6 é¡µ</span>
            </div>
            <p class="lesson-subtitle">è™šæ‹Ÿäººå½•å±è¯¾ä»¶æ¨¡æ¿ Â· è‡ªåŠ¨ç”Ÿæˆçš„æ¿ä¹¦ã€åŠ¨ç”»ã€è®²ç¨¿ä¸‰æ è„šæœ¬</p>
        </div>
        <div class="lesson-timeline">
            <button class="timeline-item active" data-target="1"><span class="timeline-index">01</span><span class="timeline-title">è¯¾ç¨‹å¯¼å…¥</span><span class="timeline-duration">30ç§’</span></button>
            <button class="timeline-item" data-target="2"><span class="timeline-index">02</span><span class="timeline-title">å…¨å¾®åˆ†çš„å‡ ä½•æ„ä¹‰</span><span class="timeline-duration">55ç§’</span></button>
            <button class="timeline-item" data-target="3"><span class="timeline-index">03</span><span class="timeline-title">æ¢¯åº¦å‘é‡</span><span class="timeline-duration">55ç§’</span></button>
            <button class="timeline-item" data-target="4"><span class="timeline-index">04</span><span class="timeline-title">æ–¹å‘å¯¼æ•°è®¡ç®—</span><span class="timeline-duration">60ç§’</span></button>
            <button class="timeline-item" data-target="5"><span class="timeline-index">05</span><span class="timeline-title">å¤šå…ƒé“¾å¼æ³•åˆ™</span><span class="timeline-duration">55ç§’</span></button>
            <button class="timeline-item" data-target="6"><span class="timeline-index">06</span><span class="timeline-title">æ¡ˆä¾‹ï¼šæ¸©åº¦é¢„æµ‹</span><span class="timeline-duration">55ç§’</span></button>
        </div>
    </header>
    <div class="avatar-container">
        <div class="wrapper" id="avatarWrapper"></div>
    </div>
    <div id="slide-container" class="slide-container flex-grow">
        <div class="slide active" data-slide="1">
            <div class="slide-content">
                <aside class="slide-meta">
                    <div class="slide-meta__badge">ç¬¬ 1 / 6 é¡µ</div>
                    <div class="slide-meta__duration">â±ï¸ 30 ç§’</div>
                    <div class="slide-progress"><div class="slide-progress__bar" style="width: 0%"></div></div>
                    <div class="slide-meta__action">æ¨èåŠ¨ä½œï¼š<span>A_RLH_welcome_O</span></div>
                    <div class="slide-meta__note">è‡ªåŠ¨æ’­æ”¾ä¼šé¢å¤–ä¿ç•™è®²ç¨¿ç¼“å†²æ—¶é—´ã€‚</div>
                </aside>
                <section class="panel board-pane">
                    <header class="panel__header"><h2>è¯¾ç¨‹å¯¼å…¥</h2></header>
                    <div class="panel__body">
        <ul><li>æ ‡é¢˜ï¼šå…¨å¾®åˆ†ä¸æ¢¯åº¦</li><li>æ ¸å¿ƒé—®é¢˜ï¼šå¦‚ä½•ç”¨å¹³é¢è¿‘ä¼¼æ›²é¢ï¼Ÿå“ªä¸ªæ–¹å‘å˜åŒ–æœ€å¿«ï¼Ÿ</li></ul>
                    </div>
                </section>
                <section class="panel animation-pane">
                    <header class="panel__header"><h3>åŠ¨ç”»æ‰§è¡Œæç¤º</h3></header>
                    <div class="panel__body">
        <ol><li>æ›²é¢ä¸Šä¸€ç‚¹é—ªçƒï¼Œé€æ˜åˆ‡å¹³é¢ç¼“æ…¢è´´åˆã€‚</li><li>æ¢¯åº¦ç®­å¤´ä»è¯¥ç‚¹å‡èµ·ã€‚</li></ol>
                    </div>
                </section>
                <section class="panel narration-pane">
                    <header class="panel__header"><h3>è™šæ‹Ÿäººè®²ç¨¿</h3><span class="action-chip">åŠ¨ä½œï¼šA_RLH_welcome_O</span></header>
                    <div class="panel__body">
        <p>è¿™ä¸€èŠ‚æˆ‘ä»¬è¦æŒæ¡ä¸‰ä»¶å®ç”¨å·¥å…·ï¼šå…¨å¾®åˆ†ã€æ¢¯åº¦å‘é‡å’Œæ–¹å‘å¯¼æ•°ã€‚å®ƒä»¬å‘Šè¯‰æˆ‘ä»¬æ›²é¢åœ¨å±€éƒ¨å¦‚ä½•è¿‘ä¼¼æˆå¹³é¢ï¼Œä»¥åŠæ²¿å“ªä¸ªæ–¹å‘å¢é•¿å¾—æœ€å¿«ã€‚</p>
                    </div>
                </section>
            </div>
        </div>
        <div class="slide" data-slide="2">
            <div class="slide-content">
                <aside class="slide-meta">
                    <div class="slide-meta__badge">ç¬¬ 2 / 6 é¡µ</div>
                    <div class="slide-meta__duration">â±ï¸ 55 ç§’</div>
                    <div class="slide-progress"><div class="slide-progress__bar" style="width: 20%"></div></div>
                    <div class="slide-meta__action">æ¨èåŠ¨ä½œï¼š<span>A_LH_introduced_O</span></div>
                    <div class="slide-meta__note">è‡ªåŠ¨æ’­æ”¾ä¼šé¢å¤–ä¿ç•™è®²ç¨¿ç¼“å†²æ—¶é—´ã€‚</div>
                </aside>
                <section class="panel board-pane">
                    <header class="panel__header"><h2>å…¨å¾®åˆ†çš„å‡ ä½•æ„ä¹‰</h2></header>
                    <div class="panel__body">
        <ul><li>åˆ‡å¹³é¢è¿‘ä¼¼ï¼šz â‰ˆ f(xâ‚€, yâ‚€) + f_xÂ·Î”x + f_yÂ·Î”y</li><li>å…¨å¾®åˆ†ï¼šdz = f_x dx + f_y dy</li><li>ç”¨åˆ‡å¹³é¢ä¼°ç®—é«˜åº¦å˜åŒ–</li></ul>
                    </div>
                </section>
                <section class="panel animation-pane">
                    <header class="panel__header"><h3>åŠ¨ç”»æ‰§è¡Œæç¤º</h3></header>
                    <div class="panel__body">
        <ol><li>åˆ‡å¹³é¢åœ¨æ›²é¢ä¸Šæ–¹å±•å¼€ï¼ŒÎ”xã€Î”y ç®­å¤´å‡ºç°ã€‚</li><li>åˆ‡å¹³é¢ä¸Šçš„ä¼°ç®—é«˜åº¦ä»¥è™šçº¿è¿æ¥çœŸå®æ›²é¢ã€‚</li></ol>
                    </div>
                </section>
                <section class="panel narration-pane">
                    <header class="panel__header"><h3>è™šæ‹Ÿäººè®²ç¨¿</h3><span class="action-chip">åŠ¨ä½œï¼šA_LH_introduced_O</span></header>
                    <div class="panel__body">
        <p>å…¨å¾®åˆ†å‘Šè¯‰æˆ‘ä»¬ï¼šåœ¨è¶³å¤Ÿå°çš„èŒƒå›´å†…ï¼Œæ›²é¢å¯ä»¥ç”¨ä¸€ä¸ªå¹³é¢è¿‘ä¼¼ã€‚å…¬å¼ dz = f_x dx + f_y dy å°±æ˜¯è¿™ä¸ªå¹³é¢çš„æ–œç‡ç»„åˆã€‚</p>
                    </div>
                </section>
            </div>
        </div>
        <div class="slide" data-slide="3">
            <div class="slide-content">
                <aside class="slide-meta">
                    <div class="slide-meta__badge">ç¬¬ 3 / 6 é¡µ</div>
                    <div class="slide-meta__duration">â±ï¸ 55 ç§’</div>
                    <div class="slide-progress"><div class="slide-progress__bar" style="width: 40%"></div></div>
                    <div class="slide-meta__action">æ¨èåŠ¨ä½œï¼š<span>A_RH_point_O</span></div>
                    <div class="slide-meta__note">è‡ªåŠ¨æ’­æ”¾ä¼šé¢å¤–ä¿ç•™è®²ç¨¿ç¼“å†²æ—¶é—´ã€‚</div>
                </aside>
                <section class="panel board-pane">
                    <header class="panel__header"><h2>æ¢¯åº¦å‘é‡</h2></header>
                    <div class="panel__body">
        <ul><li>æ¢¯åº¦ï¼šâˆ‡f = âŸ¨f_x, f_yâŸ©</li><li>æ€§è´¨ï¼šæŒ‡å‘å‡½æ•°å€¼å¢é•¿æœ€å¿«çš„æ–¹å‘ï¼Œä¸ç­‰å€¼çº¿å‚ç›´</li></ul>
                    </div>
                </section>
                <section class="panel animation-pane">
                    <header class="panel__header"><h3>åŠ¨ç”»æ‰§è¡Œæç¤º</h3></header>
                    <div class="panel__body">
        <ol><li>ç­‰å€¼çº¿å›¾ä¸Šå‡ºç°ä¸€æ”¯æŒ‡å‘å¤–ä¾§çš„çº¢è‰²ç®­å¤´ã€‚</li><li>ç®­å¤´å°¾éƒ¨ä¸ç­‰å€¼çº¿å‚ç›´ï¼Œæ˜¾ç¤ºå‚ç›´ç¬¦å·ã€‚</li></ol>
                    </div>
                </section>
                <section class="panel narration-pane">
                    <header class="panel__header"><h3>è™šæ‹Ÿäººè®²ç¨¿</h3><span class="action-chip">åŠ¨ä½œï¼šA_RH_point_O</span></header>
                    <div class="panel__body">
        <p>æ¢¯åº¦å‘é‡çš„æ–¹å‘ï¼Œå°±æ˜¯å‡½æ•°ä¸Šå‡å¾—æœ€å¿«çš„æ–¹å‘ï¼ŒåŒæ—¶å®ƒä¹Ÿå‚ç›´äºç­‰å€¼çº¿ã€‚ç­‰å€¼çº¿è¶Šå¯†é›†ï¼Œæ¢¯åº¦çš„é•¿åº¦è¶Šå¤§ã€‚</p>
                    </div>
                </section>
            </div>
        </div>
        <div class="slide" data-slide="4">
            <div class="slide-content">
                <aside class="slide-meta">
                    <div class="slide-meta__badge">ç¬¬ 4 / 6 é¡µ</div>
                    <div class="slide-meta__duration">â±ï¸ 60 ç§’</div>
                    <div class="slide-progress"><div class="slide-progress__bar" style="width: 60%"></div></div>
                    <div class="slide-meta__action">æ¨èåŠ¨ä½œï¼š<span>A_LH_emphasize_O</span></div>
                    <div class="slide-meta__note">è‡ªåŠ¨æ’­æ”¾ä¼šé¢å¤–ä¿ç•™è®²ç¨¿ç¼“å†²æ—¶é—´ã€‚</div>
                </aside>
                <section class="panel board-pane">
                    <header class="panel__header"><h2>æ–¹å‘å¯¼æ•°è®¡ç®—</h2></header>
                    <div class="panel__body">
        <ul><li>å®šä¹‰ï¼šD_u f = âˆ‡f Â· uï¼Œå…¶ä¸­ u ä¸ºå•ä½æ–¹å‘å‘é‡</li><li>æ­¥éª¤ï¼šæ±‚æ¢¯åº¦ â†’ å•ä½åŒ–æ–¹å‘ â†’ ç‚¹ä¹˜</li></ul>
                    </div>
                </section>
                <section class="panel animation-pane">
                    <header class="panel__header"><h3>åŠ¨ç”»æ‰§è¡Œæç¤º</h3></header>
                    <div class="panel__body">
        <ol><li>æ›²é¢ä¸Šæ˜¾ç¤ºä¸€ä¸ªå¯æ—‹è½¬çš„æ–¹å‘å‘é‡ã€‚</li><li>æ¡å½¢å›¾å±•ç¤ºä¸åŒæ–¹å‘çš„å˜åŒ–ç‡ã€‚</li></ol>
                    </div>
                </section>
                <section class="panel narration-pane">
                    <header class="panel__header"><h3>è™šæ‹Ÿäººè®²ç¨¿</h3><span class="action-chip">åŠ¨ä½œï¼šA_LH_emphasize_O</span></header>
                    <div class="panel__body">
        <p>æ–¹å‘å¯¼æ•°å°±æ˜¯æŠŠæ¢¯åº¦æŠ•å½±åˆ°ä½ å…³å¿ƒçš„æ–¹å‘ä¸Šã€‚å…ˆæŠŠæ–¹å‘å‘é‡å•ä½åŒ–ï¼Œå†å’Œæ¢¯åº¦åšç‚¹ä¹˜ï¼Œç»“æœå°±æ˜¯è¯¥æ–¹å‘çš„å˜åŒ–ç‡ã€‚</p>
                    </div>
                </section>
            </div>
        </div>
        <div class="slide" data-slide="5">
            <div class="slide-content">
                <aside class="slide-meta">
                    <div class="slide-meta__badge">ç¬¬ 5 / 6 é¡µ</div>
                    <div class="slide-meta__duration">â±ï¸ 55 ç§’</div>
                    <div class="slide-progress"><div class="slide-progress__bar" style="width: 80%"></div></div>
                    <div class="slide-meta__action">æ¨èåŠ¨ä½œï¼š<span>A_RH_please_O</span></div>
                    <div class="slide-meta__note">è‡ªåŠ¨æ’­æ”¾ä¼šé¢å¤–ä¿ç•™è®²ç¨¿ç¼“å†²æ—¶é—´ã€‚</div>
                </aside>
                <section class="panel board-pane">
                    <header class="panel__header"><h2>å¤šå…ƒé“¾å¼æ³•åˆ™</h2></header>
                    <div class="panel__body">
        <ul><li>åœºæ™¯ï¼šz = f(x, y)ï¼Œx = x(t)ï¼Œy = y(t)</li><li>ç»“è®ºï¼šdz/dt = f_xÂ·dx/dt + f_yÂ·dy/dt</li><li>åº”ç”¨ï¼šæ²¿è·¯å¾„è¿½è¸ªæ¸©åº¦æˆ–æˆæœ¬å˜åŒ–</li></ul>
                    </div>
                </section>
                <section class="panel animation-pane">
                    <header class="panel__header"><h3>åŠ¨ç”»æ‰§è¡Œæç¤º</h3></header>
                    <div class="panel__body">
        <ol><li>ç²’å­æ²¿æ›²é¢ä¸Šçš„è·¯å¾„è¿åŠ¨ï¼Œè½¨è¿¹éšæ—¶é—´ç‚¹äº®ã€‚</li><li>x(t)ã€y(t)ã€z(t) çš„æ›²çº¿åŒæ­¥åœ¨ä¾§è¾¹å°çª—ä¸­æ˜¾ç¤ºã€‚</li></ol>
                    </div>
                </section>
                <section class="panel narration-pane">
                    <header class="panel__header"><h3>è™šæ‹Ÿäººè®²ç¨¿</h3><span class="action-chip">åŠ¨ä½œï¼šA_RH_please_O</span></header>
                    <div class="panel__body">
        <p>å½“ xã€y æœ¬èº«ä¹Ÿéšæ—¶é—´å˜åŒ–æ—¶ï¼Œéœ€è¦ç”¨å¤šå…ƒé“¾å¼æ³•åˆ™ã€‚å®ƒæŠŠå…¨å¾®åˆ†çš„æ€æƒ³å»¶ä¼¸åˆ°åŠ¨æ€åœºæ™¯ï¼šæ²¿ç€è¿åŠ¨è½¨è¿¹ï¼Œz çš„å˜åŒ–ç‡ç”±ä¸¤éƒ¨åˆ†è´¡çŒ®ç»„æˆã€‚</p>
                    </div>
                </section>
            </div>
        </div>
        <div class="slide" data-slide="6">
            <div class="slide-content">
                <aside class="slide-meta">
                    <div class="slide-meta__badge">ç¬¬ 6 / 6 é¡µ</div>
                    <div class="slide-meta__duration">â±ï¸ 55 ç§’</div>
                    <div class="slide-progress"><div class="slide-progress__bar" style="width: 100%"></div></div>
                    <div class="slide-meta__action">æ¨èåŠ¨ä½œï¼š<span>A_RH_smile_O</span></div>
                    <div class="slide-meta__note">è‡ªåŠ¨æ’­æ”¾ä¼šé¢å¤–ä¿ç•™è®²ç¨¿ç¼“å†²æ—¶é—´ã€‚</div>
                </aside>
                <section class="panel board-pane">
                    <header class="panel__header"><h2>æ¡ˆä¾‹ï¼šæ¸©åº¦é¢„æµ‹</h2></header>
                    <div class="panel__body">
        <ul><li>æ¸©åº¦åœºï¼šT(x, y) = 20 + 3x âˆ’ 2y</li><li>æ–¹å‘ï¼šå‘é‡ (2, 1)</li><li>è®¡ç®—ï¼šâˆ‡T = âŸ¨3, âˆ’2âŸ©ï¼Œå•ä½æ–¹å‘ (2,1)/âˆš5ï¼ŒD_u T â‰ˆ 1.79 â„ƒ/å•ä½é•¿åº¦</li></ul>
                    </div>
                </section>
                <section class="panel animation-pane">
                    <header class="panel__header"><h3>åŠ¨ç”»æ‰§è¡Œæç¤º</h3></header>
                    <div class="panel__body">
        <ol><li>åŸå¸‚çƒ­åŠ›å›¾æ˜¾ç¤ºå½“å‰ä½ç½®ä¸ç§»åŠ¨æ–¹å‘ã€‚</li><li>è®¡ç®—æ­¥éª¤é€æ¡å‡ºç°ï¼Œç»“æœæ•°å€¼é«˜äº®ã€‚</li></ol>
                    </div>
                </section>
                <section class="panel narration-pane">
                    <header class="panel__header"><h3>è™šæ‹Ÿäººè®²ç¨¿</h3><span class="action-chip">åŠ¨ä½œï¼šA_RH_smile_O</span></header>
                    <div class="panel__body">
        <p>æœ‰äº†æ¢¯åº¦ï¼Œæˆ‘ä»¬å¯ä»¥ç«‹å³ä¼°ç®—æ²¿ä»»æ„æ–¹å‘å‰è¿›æ—¶æ¸©åº¦ä¼šå¦‚ä½•å˜åŒ–ã€‚æ–¹å‘å¯¼æ•° 4/âˆš5 è¡¨ç¤ºæ¯å•ä½é•¿åº¦æ¸©åº¦ä¸Šå‡çº¦ 1.79 æ‘„æ°åº¦ã€‚"</p>
        <p>---</p>
                    </div>
                </section>
            </div>
        </div>
    </div>
    <div class="subtitle-area" id="subtitleArea">æ¬¢è¿å­¦ä¹ ç¬¬8ç«  è§†é¢‘ 8.2 å…¨å¾®åˆ†ã€æ¢¯åº¦ä¸æ–¹å‘å¯¼æ•°ï¼ç‚¹å‡»å¼€å§‹è®²è¯¾å¯åŠ¨è™šæ‹Ÿäººè®²å¸ˆã€‚</div>
    <div class="control-bar">
        <div class="control-title">ç¬¬ <span id="currentSlide">1</span> é¡µ / å…± <span id="totalSlides">6</span> é¡µ</div>
        <button class="btn" onclick="previousSlide()">â¬…ï¸ ä¸Šä¸€é¡µ</button>
        <button class="btn primary" onclick="startTeaching()" id="startBtn">ğŸ€ å¼€å§‹è®²è¯¾</button>
        <button class="btn" onclick="nextSlide()">ä¸‹ä¸€é¡µ â¡ï¸</button>
        <button class="btn" onclick="restart()">ğŸ”„ é‡æ–°å¼€å§‹</button>
        <button class="btn autoplay" onclick="startAutoPlay()" id="autoPlayBtn">ğŸ¬ è‡ªåŠ¨æ’­æ”¾</button>
        <div class="control-hint">ğŸ’¡ å½•åˆ¶æç¤ºï¼šç‚¹å‡»è‡ªåŠ¨æ’­æ”¾åç«‹å³å¼€å§‹å½•å±ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å®Œæˆå…¨éƒ¨æ¼”ç¤ºã€‚</div>
        <div class="control-shortcuts">ğŸ’¡ å¿«æ·é”®ï¼šç©ºæ ¼/â†’ ä¸‹ä¸€é¡µï¼Œâ† ä¸Šä¸€é¡µï¼ŒEnter æ’­æ”¾å½“å‰é¡µ</div>
    </div>
    <script type="module">
        try {
            const { default: AvatarPlatform, SDKEvents, PlayerEvents, RecorderEvents, UserMedia } = await import('./avatar-sdk-web_3.1.2.1002/index.js');
            window.AvatarPlatform = AvatarPlatform;
            window.SDKEvents = SDKEvents;
            window.PlayerEvents = PlayerEvents;
            window.RecorderEvents = RecorderEvents;
            window.UserMedia = UserMedia;
            console.log('âœ… è®¯é£å®˜æ–¹SDKæ¨¡å—å·²åŠ è½½');
            console.log('SDKç‰ˆæœ¬:', AvatarPlatform.getVersion());
        } catch (error) {
            console.error('âŒ SDKæ¨¡å—åŠ è½½å¤±è´¥:', error);
        }
        window.dispatchEvent(new CustomEvent('sdkReady'));
    </script>
    <script>
        const lessonTitle = "ç¬¬8ç«  è§†é¢‘ 8.2 å…¨å¾®åˆ†ã€æ¢¯åº¦ä¸æ–¹å‘å¯¼æ•°";
        const subtitleScript = {
  "1": "è¿™ä¸€èŠ‚æˆ‘ä»¬è¦æŒæ¡ä¸‰ä»¶å®ç”¨å·¥å…·ï¼šå…¨å¾®åˆ†ã€æ¢¯åº¦å‘é‡å’Œæ–¹å‘å¯¼æ•°ã€‚å®ƒä»¬å‘Šè¯‰æˆ‘ä»¬æ›²é¢åœ¨å±€éƒ¨å¦‚ä½•è¿‘ä¼¼æˆå¹³é¢ï¼Œä»¥åŠæ²¿å“ªä¸ªæ–¹å‘å¢é•¿å¾—æœ€å¿«ã€‚",
  "2": "å…¨å¾®åˆ†å‘Šè¯‰æˆ‘ä»¬ï¼šåœ¨è¶³å¤Ÿå°çš„èŒƒå›´å†…ï¼Œæ›²é¢å¯ä»¥ç”¨ä¸€ä¸ªå¹³é¢è¿‘ä¼¼ã€‚å…¬å¼ dz = f_x dx + f_y dy å°±æ˜¯è¿™ä¸ªå¹³é¢çš„æ–œç‡ç»„åˆã€‚",
  "3": "æ¢¯åº¦å‘é‡çš„æ–¹å‘ï¼Œå°±æ˜¯å‡½æ•°ä¸Šå‡å¾—æœ€å¿«çš„æ–¹å‘ï¼ŒåŒæ—¶å®ƒä¹Ÿå‚ç›´äºç­‰å€¼çº¿ã€‚ç­‰å€¼çº¿è¶Šå¯†é›†ï¼Œæ¢¯åº¦çš„é•¿åº¦è¶Šå¤§ã€‚",
  "4": "æ–¹å‘å¯¼æ•°å°±æ˜¯æŠŠæ¢¯åº¦æŠ•å½±åˆ°ä½ å…³å¿ƒçš„æ–¹å‘ä¸Šã€‚å…ˆæŠŠæ–¹å‘å‘é‡å•ä½åŒ–ï¼Œå†å’Œæ¢¯åº¦åšç‚¹ä¹˜ï¼Œç»“æœå°±æ˜¯è¯¥æ–¹å‘çš„å˜åŒ–ç‡ã€‚",
  "5": "å½“ xã€y æœ¬èº«ä¹Ÿéšæ—¶é—´å˜åŒ–æ—¶ï¼Œéœ€è¦ç”¨å¤šå…ƒé“¾å¼æ³•åˆ™ã€‚å®ƒæŠŠå…¨å¾®åˆ†çš„æ€æƒ³å»¶ä¼¸åˆ°åŠ¨æ€åœºæ™¯ï¼šæ²¿ç€è¿åŠ¨è½¨è¿¹ï¼Œz çš„å˜åŒ–ç‡ç”±ä¸¤éƒ¨åˆ†è´¡çŒ®ç»„æˆã€‚",
  "6": "æœ‰äº†æ¢¯åº¦ï¼Œæˆ‘ä»¬å¯ä»¥ç«‹å³ä¼°ç®—æ²¿ä»»æ„æ–¹å‘å‰è¿›æ—¶æ¸©åº¦ä¼šå¦‚ä½•å˜åŒ–ã€‚æ–¹å‘å¯¼æ•° 4/âˆš5 è¡¨ç¤ºæ¯å•ä½é•¿åº¦æ¸©åº¦ä¸Šå‡çº¦ 1.79 æ‘„æ°åº¦ã€‚\" ---"
};
        const actionMap = {
  "1": "A_RLH_welcome_O",
  "2": "A_LH_introduced_O",
  "3": "A_RH_point_O",
  "4": "A_LH_emphasize_O",
  "5": "A_RH_please_O",
  "6": "A_RH_smile_O"
};
        const slideTitles = {
  "1": "è¯¾ç¨‹å¯¼å…¥",
  "2": "å…¨å¾®åˆ†çš„å‡ ä½•æ„ä¹‰",
  "3": "æ¢¯åº¦å‘é‡",
  "4": "æ–¹å‘å¯¼æ•°è®¡ç®—",
  "5": "å¤šå…ƒé“¾å¼æ³•åˆ™",
  "6": "æ¡ˆä¾‹ï¼šæ¸©åº¦é¢„æµ‹"
};
        const slideDurations = {
  "1": 34500,
  "2": 63249,
  "3": 63249,
  "4": 69000,
  "5": 63249,
  "6": 63249
};
        const totalSlides = 6;

        let avatarPlatform = null;
        let isConnected = false;
        let isTeaching = false;
        let currentSlide = 0;
        let isAutoPlaying = false;

        const slides = document.querySelectorAll('.slide');
        const timelineItems = document.querySelectorAll('.timeline-item');

        function showSlide(index) {
            slides.forEach((slide, i) => slide.classList.toggle('active', i === index));
            currentSlide = index;
            document.getElementById('currentSlide').textContent = index + 1;
            if (window.MathJax && window.MathJax.typesetPromise) {
                window.MathJax.typesetPromise([slides[index]]).catch(err => console.error(err));
            }
            timelineItems.forEach((item, i) => item.classList.toggle('active', i === index));
        }

        function nextSlide() {
            if (currentSlide < totalSlides - 1) {
                showSlide(currentSlide + 1);
                if (!isAutoPlaying) speakContent(currentSlide + 1);
            }
        }

        function previousSlide() {
            if (currentSlide > 0) {
                showSlide(currentSlide - 1);
                if (!isAutoPlaying) speakContent(currentSlide + 1);
            }
        }

        function restart() {
            showSlide(0);
            if (!isAutoPlaying) speakContent(1);
        }

        function updateSubtitle(text) {
            const area = document.getElementById('subtitleArea');
            if (area) {
                area.textContent = text;
            }
        }

        function updateStatus(message, type = 'normal') {
            const indicator = document.getElementById('statusIndicator');
            if (!indicator) return;
            indicator.textContent = message;
            indicator.className = 'status-indicator';
            if (type === 'connected') indicator.classList.add('connected');
            if (type === 'error') indicator.classList.add('error');
            if (type === 'connecting') indicator.classList.add('connecting');
            if (type === 'recording') indicator.classList.add('recording');
        }

        function waitForSDK() {
            return new Promise((resolve, reject) => {
                if (typeof AvatarPlatform !== 'undefined') {
                    resolve();
                    return;
                }
                const timeout = setTimeout(() => {
                    reject(new Error('SDKåŠ è½½è¶…æ—¶ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•'));
                }, 10000);
                window.addEventListener('sdkReady', function handler() {
                    clearTimeout(timeout);
                    window.removeEventListener('sdkReady', handler);
                    resolve();
                });
            });
        }

        async function startTeaching() {
            const startBtn = document.getElementById('startBtn');
            startBtn.textContent = 'ğŸ”„ å¯åŠ¨ä¸­...';
            startBtn.disabled = true;
            try {
                updateStatus('ç­‰å¾…SDKåŠ è½½...', 'connecting');
                await waitForSDK();
                if (avatarPlatform) {
                    avatarPlatform.destroy();
                }
                avatarPlatform = new AvatarPlatform({ useInlinePlayer: true });
                avatarPlatform
                    .on('connected', () => {
                        isConnected = true;
                        isTeaching = true;
                        updateStatus('å·²è¿æ¥', 'connected');
                        startBtn.textContent = 'ğŸ’– è™šæ‹Ÿäººå·²å°±ç»ª';
                        setTimeout(() => speakContent(currentSlide + 1), 500);
                    })
                    .on('disconnected', () => {
                        isConnected = false;
                        isTeaching = false;
                        updateStatus('è¿æ¥æ–­å¼€', 'error');
                        startBtn.textContent = 'é‡æ–°è¿æ¥';
                        startBtn.disabled = false;
                    })
                    .on('error', (error) => {
                        console.error('âŒ è™šæ‹Ÿäººé”™è¯¯:', error);
                        updateStatus('é”™è¯¯: ' + error.message, 'error');
                        startBtn.textContent = 'è¿æ¥å¤±è´¥';
                        startBtn.disabled = false;
                    });

                avatarPlatform.setApiInfo({
                    appId: 'b4889d02',
                    apiKey: 'de174061f9ffd1f4e7f1827aa98881be',
                    apiSecret: 'NWMyZThkMWVkMDZmYThlOTA5ZGE2NjM2',
                    sceneId: '213607046975721472',
                    serverUrl: 'wss://avatar.cn-huadong-1.xf-yun.com/v1/interact'
                });

                avatarPlatform.setGlobalParams({
                    stream: { protocol: 'xrtc', alpha: 1, bitrate: 1000000, fps: 25 },
                    avatar: { avatar_id: '110332017', width: 1920, height: 1080, scale: 1, move_h: 0, move_v: 0, audio_format: 1 },
                    tts: { vcn: 'x4_yiting', speed: 50, pitch: 50, volume: 100 },
                    avatar_dispatch: { interactive_mode: 1, content_analysis: 0 }
                });

                await avatarPlatform.start({ wrapper: document.getElementById('avatarWrapper') });
            } catch (error) {
                console.error('âŒ å¯åŠ¨å¤±è´¥:', error);
                updateStatus('å¯åŠ¨å¤±è´¥', 'error');
                startBtn.textContent = 'ğŸ”„ é‡è¯•';
                startBtn.disabled = false;
                alert('å¯åŠ¨å¤±è´¥: ' + error.message);
            }
        }

        async function speakContent(slideNum) {
            const text = subtitleScript[slideNum] || '';
            updateSubtitle(text ? `ã€ç¬¬${slideNum}é¡µ/${totalSlides}é¡µã€‘` + text : `ç¬¬${slideNum}é¡µ`);
            if (!isTeaching || !isConnected || !avatarPlatform || !text) return;
            try {
                const action = actionMap[slideNum];
                if (action) {
                    await avatarPlatform.writeCmd('action', action);
                }
                await avatarPlatform.writeText(text, { nlp: false });
            } catch (error) {
                console.error('âŒ è¯­éŸ³æ’­æŠ¥å¤±è´¥:', error);
            }
        }

        async function startAutoPlay() {
            const autoBtn = document.getElementById('autoPlayBtn');
            if (isAutoPlaying) {
                isAutoPlaying = false;
                autoBtn.textContent = 'ğŸ¬ è‡ªåŠ¨æ’­æ”¾';
                autoBtn.classList.remove('stop');
                updateStatus('è‡ªåŠ¨æ’­æ”¾å·²åœæ­¢');
                return;
            }
            isAutoPlaying = true;
            autoBtn.textContent = 'â¹ï¸ åœæ­¢æ’­æ”¾';
            autoBtn.classList.add('stop');
            updateStatus('ğŸ¬ è‡ªåŠ¨æ’­æ”¾å¼€å§‹ï¼', 'recording');

            for (let slide = 1; slide <= totalSlides; slide++) {
                if (!isAutoPlaying) break;
                showSlide(slide - 1);
                speakContent(slide);
                const duration = slideDurations[slide] || 18000;
                await new Promise(resolve => setTimeout(resolve, duration));
            }

            isAutoPlaying = false;
            autoBtn.textContent = 'ğŸ¬ è‡ªåŠ¨æ’­æ”¾';
            autoBtn.classList.remove('stop');
            updateStatus('è¯¾ç¨‹æ’­æ”¾ç»“æŸ');
        }

        timelineItems.forEach((item, index) => {
            item.addEventListener('click', () => {
                isAutoPlaying = false;
                const autoBtn = document.getElementById('autoPlayBtn');
                autoBtn.textContent = 'ğŸ¬ è‡ªåŠ¨æ’­æ”¾';
                autoBtn.classList.remove('stop');
                showSlide(index);
                speakContent(index + 1);
            });
        });

        document.addEventListener('keydown', (event) => {
            if (event.key === 'ArrowRight' || event.key === ' ') {
                event.preventDefault();
                nextSlide();
            } else if (event.key === 'ArrowLeft') {
                event.preventDefault();
                previousSlide();
            } else if (event.key === 'Enter') {
                event.preventDefault();
                speakContent(currentSlide + 1);
            }
        });

        window.addEventListener('beforeunload', () => {
            if (avatarPlatform && isConnected) {
                avatarPlatform.stop();
            }
        });

        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('totalSlides').textContent = totalSlides;
            showSlide(0);
        });
    </script>
</body>
</html>
