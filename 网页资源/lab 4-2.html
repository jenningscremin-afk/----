<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ´›å¿…è¾¾æ³•åˆ™å®éªŒå®¤</title>

    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
            },
            startup: {
                pageReady: () => {
                    return MathJax.startup.defaultPageReady().then(() => {
                        console.log('MathJaxåŠ è½½å®Œæˆ');
                    });
                }
            }
        };
    </script>
    <script defer src="../common-assets/js/mathjax-3.2.2-tex-svg.min.js"></script>
    <script defer src="../common-assets/js/lab-math-enhancer.js"></script>

    <style>
        :root {
            --primary: #4f46e5;
            --primary-dark: #3730a3;
            --primary-light: #6366f1;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #1f2937;
            --white: #ffffff;
            --border: #e5e7eb;
            --h1-size: 22px;
            --h3-size: 18px;
            --text-size: 16px;
            --formula-size: 20px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        *::-webkit-scrollbar { width: 6px; }
        *::-webkit-scrollbar-track { background: transparent; }
        *::-webkit-scrollbar-thumb { background: var(--gray-300); border-radius: 3px; }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Microsoft YaHei", Arial, sans-serif;
            font-size: var(--text-size);
            line-height: 1.5;
            background: var(--gray-50);
            color: var(--gray-700);
        }

        .container {
            width: 100%;
            max-width: 1400px;
            height: 100vh;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            background: var(--white);
        }

        .header {
            height: 60px;
            background: var(--primary);
            color: var(--white);
            display: flex;
            align-items: center;
            padding: 0 20px;
            gap: 15px;
        }

        .header h1 { font-size: var(--h1-size); margin: 0; }
        .header > div { font-size: 14px; opacity: 0.9; }

        .main { flex: 1; display: flex; overflow: hidden; }

        .sidebar {
            width: 150px;
            background: var(--gray-50);
            border-right: 1px solid var(--border);
            padding: 20px 10px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .nav-btn {
            width: 100%;
            padding: 10px;
            background: transparent;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: var(--text-size);
            color: var(--gray-600);
            text-align: left;
            transition: all 0.2s ease;
        }

        .nav-btn.active { 
            background: var(--primary); 
            color: var(--white);
            transform: translateX(5px);
        }

        .nav-btn:hover:not(.active) { 
            background: var(--gray-100);
            transform: translateX(2px);
        }

        .content {
            flex: 1;
            position: relative;
            overflow: hidden;
            padding: 0;
        }

        .page-content {
            display: none;
            height: 100%;
            padding: 20px;
            overflow-y: auto;
        }

        .page-content.active {
            display: block;
        }

        .two-column {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 20px;
            height: 100%;
        }

        .column { 
            display: flex; 
            flex-direction: column; 
            gap: 16px; 
            overflow-y: auto; 
            padding-right: 4px; 
        }

        .card { 
            background: var(--white); 
            border: 1px solid var(--border); 
            border-radius: 12px; 
            padding: 16px; 
            display: flex; 
            flex-direction: column; 
            gap: 12px; 
        }

        .card h3 { 
            font-size: var(--h3-size); 
            color: var(--primary-dark);
            border-bottom: 2px solid var(--gray-100);
            padding-bottom: 8px;
        }
        
        .card p { line-height: 1.6; }
        
        .formula-display {
            background: var(--gray-50);
            padding: 16px;
            border-radius: 8px;
            text-align: center;
            font-size: var(--formula-size);
            min-height: 60px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .controls { 
            display: flex; 
            flex-direction: column; 
            gap: 12px; 
            background: var(--gray-50); 
            border: 1px solid var(--gray-200); 
            border-radius: 10px; 
            padding: 12px; 
        }
        
        .control-row { 
            display: flex; 
            align-items: center; 
            gap: 10px; 
        }
        
        .control-row label { 
            font-weight: 600;
            min-width: 100px;
        }
        
        .control-row span { 
            color: var(--primary-dark); 
            font-weight: 600;
            min-width: 40px;
            text-align: right;
        }
        
        select { 
            flex: 1; 
            padding: 8px; 
            border-radius: 8px; 
            border: 1px solid var(--gray-300); 
            font-size: 15px; 
        }
        
        input[type="range"] { 
            flex: 1; 
        }

        .btn-group { 
            display: flex; 
            gap: 10px; 
            margin-top: 10px;
        }
        
        button.action {
            flex: 1;
            background: var(--primary);
            color: var(--white);
            border: none;
            border-radius: 8px;
            padding: 12px;
            font-size: var(--text-size);
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 600;
        }

        button.action:hover { 
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(79, 70, 229, 0.3);
        }

        button.action.secondary {
            background: var(--white);
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        button.action.danger { 
            background: var(--danger); 
        }

        .flow-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .flow-step {
            position: relative;
            border: 2px solid var(--gray-200);
            border-radius: 10px;
            padding: 12px;
            background: var(--gray-50);
            transition: all 0.3s ease;
        }

        .flow-step.active {
            border-color: var(--primary);
            background: #eef2ff;
            transform: translateX(5px);
            box-shadow: 0 2px 8px rgba(79, 70, 229, 0.2);
        }

        .flow-step.success { 
            border-color: var(--success);
            background: #d1fae5;
        }

        .flow-step h4 { 
            font-size: 15px; 
            margin-bottom: 6px; 
            color: var(--primary-dark); 
        }
        
        .flow-step p { 
            font-size: 14px; 
            color: var(--gray-600); 
        }

        .canvas-wrapper {
            border: 1px solid var(--gray-200);
            border-radius: 12px;
            background: var(--white);
            padding: 10px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .canvas-wrapper canvas {
            width: 100%;
            height: 300px;
            border-radius: 8px;
            background: var(--white);
        }

        .legend { 
            display: flex; 
            gap: 16px; 
            flex-wrap: wrap; 
            font-size: 14px; 
            color: var(--gray-600); 
            padding: 8px;
            background: var(--gray-50);
            border-radius: 8px;
        }
        
        .legend span { 
            display: flex; 
            align-items: center; 
            gap: 6px; 
        }
        
        .legend i { 
            width: 16px; 
            height: 3px; 
            display: inline-block; 
        }

        .examples-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 12px;
        }

        .example-card {
            padding: 12px;
            border: 1px solid var(--gray-200);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .example-card:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .example-card.selected {
            background: #eef2ff;
            border-color: var(--primary);
        }

        .status-box {
            border-radius: 10px;
            padding: 12px;
            font-size: 14px;
            text-align: center;
        }

        .status-box.calculating {
            background: #fef3c7;
            color: #92400e;
        }

        .status-box.complete {
            background: #d1fae5;
            color: #065f46;
        }

        .status-box.error {
            background: #fee2e2;
            color: #991b1b;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .calculating {
            animation: pulse 1.5s infinite;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ”¬ æ´›å¿…è¾¾æ³•åˆ™å®éªŒå®¤</h1>
            <div>æ¢ç´¢æé™è®¡ç®—çš„å¼ºå¤§å·¥å…·</div>
        </div>
        
        <div class="main">
            <div class="sidebar">
                <button class="nav-btn active" data-page="intro">ç†è®ºä»‹ç»</button>
                <button class="nav-btn" data-page="calculator">è®¡ç®—å™¨</button>
                <button class="nav-btn" data-page="visualize">å¯è§†åŒ–</button>
                <button class="nav-btn" data-page="examples">ç»å…¸ä¾‹é¢˜</button>
                <button class="nav-btn" data-page="practice">ç»ƒä¹ æ¨¡å¼</button>
            </div>
            
            <div class="content">
                <!-- ç†è®ºä»‹ç»é¡µ -->
                <div class="page-content active" id="intro">
                    <div class="two-column">
                        <div class="column">
                            <div class="card">
                                <h3>ğŸ“š ä»€ä¹ˆæ˜¯æ´›å¿…è¾¾æ³•åˆ™ï¼Ÿ</h3>
                                <p>æ´›å¿…è¾¾æ³•åˆ™ï¼ˆL'HÃ´pital's Ruleï¼‰æ˜¯å¾®ç§¯åˆ†ä¸­ç”¨äºæ±‚è§£æœªå®šå¼æé™çš„é‡è¦æ–¹æ³•ã€‚å½“ç›´æ¥ä»£å…¥æé™å€¼å¾—åˆ° 0/0 æˆ– âˆ/âˆ å‹æœªå®šå¼æ—¶ï¼Œå¯ä»¥é€šè¿‡å¯¹åˆ†å­åˆ†æ¯åˆ†åˆ«æ±‚å¯¼æ¥è®¡ç®—æé™ã€‚</p>
                                <div class="formula-display">
                                    $$\lim_{x \to a} \frac{f(x)}{g(x)} = \lim_{x \to a} \frac{f'(x)}{g'(x)}$$
                                </div>
                            </div>
                            
                            <div class="card">
                                <h3>ğŸ¯ é€‚ç”¨æ¡ä»¶</h3>
                                <ol style="padding-left: 20px; line-height: 1.8;">
                                    <li>$f(x)$ å’Œ $g(x)$ åœ¨ç‚¹ $a$ çš„æŸå»å¿ƒé‚»åŸŸå†…å¯å¯¼</li>
                                    <li>$g'(x) \neq 0$ åœ¨è¯¥é‚»åŸŸå†…</li>
                                    <li>$\lim_{x \to a} f(x) = \lim_{x \to a} g(x) = 0$ æˆ– $\pm\infty$</li>
                                    <li>$\lim_{x \to a} \frac{f'(x)}{g'(x)}$ å­˜åœ¨ï¼ˆæœ‰é™æˆ–æ— ç©·ï¼‰</li>
                                </ol>
                            </div>
                        </div>
                        
                        <div class="column">
                            <div class="card">
                                <h3>ğŸ” æœªå®šå¼ç±»å‹</h3>
                                <div class="examples-grid">
                                    <div class="example-card">
                                        <strong>0/0 å‹</strong>
                                        <div style="margin-top: 8px;">$\lim_{x \to 0} \frac{\sin x}{x}$</div>
                                    </div>
                                    <div class="example-card">
                                        <strong>âˆ/âˆ å‹</strong>
                                        <div style="margin-top: 8px;">$\lim_{x \to \infty} \frac{e^x}{x^2}$</div>
                                    </div>
                                    <div class="example-card">
                                        <strong>0Â·âˆ å‹</strong>
                                        <div style="margin-top: 8px;">è½¬åŒ–ä¸º 0/0 æˆ– âˆ/âˆ</div>
                                    </div>
                                    <div class="example-card">
                                        <strong>âˆ-âˆ å‹</strong>
                                        <div style="margin-top: 8px;">é€šåˆ†åä½¿ç”¨</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card">
                                <h3>âš¡ ä½¿ç”¨æ­¥éª¤</h3>
                                <div class="flow-container">
                                    <div class="flow-step">
                                        <h4>æ­¥éª¤ 1ï¼šéªŒè¯æœªå®šå¼</h4>
                                        <p>ç¡®è®¤æé™æ˜¯ 0/0 æˆ– âˆ/âˆ å‹</p>
                                    </div>
                                    <div class="flow-step">
                                        <h4>æ­¥éª¤ 2ï¼šæ±‚å¯¼</h4>
                                        <p>åˆ†åˆ«å¯¹åˆ†å­ã€åˆ†æ¯æ±‚å¯¼</p>
                                    </div>
                                    <div class="flow-step">
                                        <h4>æ­¥éª¤ 3ï¼šè®¡ç®—æ–°æé™</h4>
                                        <p>æ±‚å¯¼åçš„æé™å€¼</p>
                                    </div>
                                    <div class="flow-step">
                                        <h4>æ­¥éª¤ 4ï¼šé‡å¤æˆ–ç»“æŸ</h4>
                                        <p>è‹¥ä»ä¸ºæœªå®šå¼ï¼Œå¯é‡å¤ä½¿ç”¨</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- è®¡ç®—å™¨é¡µ -->
                <div class="page-content" id="calculator">
                    <div class="two-column">
                        <div class="column">
                            <div class="card">
                                <h3>ğŸ§® æé™è®¡ç®—å™¨</h3>
                                <div class="controls">
                                    <div class="control-row">
                                        <label>é€‰æ‹©å‡½æ•°ï¼š</label>
                                        <select id="funcSelect">
                                            <option value="sinx/x">sin(x) / x</option>
                                            <option value="(e^x-1)/x">(e^x - 1) / x</option>
                                            <option value="ln(1+x)/x">ln(1+x) / x</option>
                                            <option value="(1-cosx)/x^2">(1 - cos(x)) / xÂ²</option>
                                            <option value="custom">è‡ªå®šä¹‰...</option>
                                        </select>
                                    </div>
                                    <div class="control-row">
                                        <label>æé™ç‚¹ aï¼š</label>
                                        <input type="range" id="limitPoint" min="-5" max="5" step="0.1" value="0">
                                        <span id="limitValue">0</span>
                                    </div>
                                </div>
                                <div class="btn-group">
                                    <button class="action" onclick="calculate()">å¼€å§‹è®¡ç®—</button>
                                    <button class="action secondary" onclick="reset()">é‡ç½®</button>
                                </div>
                            </div>
                            
                            <div class="card">
                                <h3>ğŸ“Š å›¾å½¢å±•ç¤º</h3>
                                <div class="canvas-wrapper">
                                    <canvas id="graph"></canvas>
                                    <div class="legend">
                                        <span><i style="background: #3b82f6;"></i>åŸå‡½æ•° f(x)/g(x)</span>
                                        <span><i style="background: #ef4444;"></i>å¯¼æ•° f'(x)/g'(x)</span>
                                        <span><i style="background: #10b981;"></i>æé™ç‚¹</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="column">
                            <div class="card">
                                <h3>ğŸ“ è®¡ç®—æ­¥éª¤</h3>
                                <div class="flow-container" id="calcSteps">
                                    <div class="flow-step">
                                        <h4>ç­‰å¾…è¾“å…¥...</h4>
                                        <p>è¯·é€‰æ‹©å‡½æ•°å¹¶ç‚¹å‡»"å¼€å§‹è®¡ç®—"</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card">
                                <h3>âœ… è®¡ç®—ç»“æœ</h3>
                                <div id="result" class="status-box" style="background: var(--gray-50);">
                                    <p>ç­‰å¾…è®¡ç®—...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- å¯è§†åŒ–é¡µ -->
                <div class="page-content" id="visualize">
                    <div class="two-column">
                        <div class="column">
                            <div class="card">
                                <h3>ğŸ¨ åŠ¨æ€å¯è§†åŒ–</h3>
                                <div class="controls">
                                    <div class="control-row">
                                        <label>é€‰æ‹©å‡½æ•°ï¼š</label>
                                        <select id="vizFunc">
                                            <option value="sinx/x">sin(x) / x</option>
                                            <option value="(e^x-1)/x">(e^x - 1) / x</option>
                                            <option value="ln(1+x)/x">ln(1+x) / x</option>
                                            <option value="(1-cosx)/x^2">(1 - cos(x)) / xÂ²</option>
                                        </select>
                                    </div>
                                    <div class="control-row">
                                        <label>åŠ¨ç”»é€Ÿåº¦ï¼š</label>
                                        <input type="range" id="animSpeed" min="1" max="10" value="5">
                                        <span id="speedValue">5</span>
                                    </div>
                                    <div class="control-row">
                                        <label>ç¼©æ”¾çº§åˆ«ï¼š</label>
                                        <input type="range" id="zoomLevel" min="20" max="100" value="50" step="10">
                                        <span id="zoomValue">50</span>
                                    </div>
                                </div>
                                <div class="btn-group">
                                    <button class="action" onclick="startAnimation()">â–¶ æ’­æ”¾åŠ¨ç”»</button>
                                    <button class="action secondary" onclick="pauseAnimation()">â¸ æš‚åœ</button>
                                    <button class="action danger" onclick="resetAnimation()">â¹ é‡ç½®</button>
                                </div>
                            </div>
                            
                            <div class="card">
                                <h3>ğŸ“Š å‡½æ•°å›¾åƒ</h3>
                                <div class="canvas-wrapper">
                                    <canvas id="animCanvas"></canvas>
                                    <div class="legend">
                                        <span><i style="background: #3b82f6;"></i>åŸå‡½æ•°</span>
                                        <span><i style="background: #ef4444;"></i>åˆ‡çº¿</span>
                                        <span><i style="background: #10b981;"></i>é€¼è¿‘ç‚¹</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="column">
                            <div class="card">
                                <h3>ğŸ“ˆ å®æ—¶æ•°å€¼</h3>
                                <div class="info-grid" style="display: grid; grid-template-columns: 1fr; gap: 10px;">
                                    <div class="info-item" style="background: var(--gray-50); padding: 10px; border-radius: 8px;">
                                        <strong>å½“å‰ x å€¼ï¼š</strong>
                                        <span id="currentX" style="font-size: 20px;">0.00</span>
                                    </div>
                                    <div class="info-item" style="background: var(--gray-50); padding: 10px; border-radius: 8px;">
                                        <strong>å‡½æ•°å€¼ f(x)/g(x)ï¼š</strong>
                                        <span id="currentY" style="font-size: 20px;">--</span>
                                    </div>
                                    <div class="info-item" style="background: var(--gray-50); padding: 10px; border-radius: 8px;">
                                        <strong>å¯¼æ•°å€¼ f'(x)/g'(x)ï¼š</strong>
                                        <span id="currentDeriv" style="font-size: 20px;">--</span>
                                    </div>
                                    <div class="info-item" style="background: #eef2ff; padding: 10px; border-radius: 8px;">
                                        <strong>æé™å€¼ï¼š</strong>
                                        <span id="limitResult" style="font-size: 20px; color: var(--primary);">1.00</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card">
                                <h3>ğŸ” æ´›å¿…è¾¾æ³•åˆ™è¿‡ç¨‹</h3>
                                <div class="flow-container">
                                    <div class="flow-step" id="viz-step1">
                                        <h4>åŸå§‹å‡½æ•°</h4>
                                        <p id="viz-func-display">$\frac{\sin x}{x}$</p>
                                    </div>
                                    <div class="flow-step" id="viz-step2">
                                        <h4>æ±‚å¯¼å</h4>
                                        <p id="viz-deriv-display">$\frac{\cos x}{1}$</p>
                                    </div>
                                    <div class="flow-step" id="viz-step3">
                                        <h4>x â†’ 0 æ—¶çš„æé™</h4>
                                        <p id="viz-limit-display">$\lim_{x \to 0} \cos x = 1$</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card">
                                <h3>ğŸ’¡ è§‚å¯Ÿè¦ç‚¹</h3>
                                <ul style="padding-left: 20px; line-height: 1.8;">
                                    <li>æ³¨æ„å‡½æ•°åœ¨ x=0 é™„è¿‘çš„è¡Œä¸º</li>
                                    <li>è§‚å¯Ÿå‡½æ•°å€¼å¦‚ä½•é€¼è¿‘æé™å€¼</li>
                                    <li>æ¯”è¾ƒåŸå‡½æ•°ä¸å¯¼æ•°çš„å›¾åƒ</li>
                                    <li>ç†è§£ä¸ºä»€ä¹ˆéœ€è¦æ´›å¿…è¾¾æ³•åˆ™</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ç»å…¸ä¾‹é¢˜é¡µ -->
                <div class="page-content" id="examples">
                    <div class="card">
                        <h3>ğŸ“– ç»å…¸ä¾‹é¢˜åº“</h3>
                        <div class="examples-grid">
                            <div class="example-card">
                                <h4>ä¾‹é¢˜ 1ï¼šåŸºç¡€ 0/0 å‹</h4>
                                <div class="formula-display">$$\lim_{x \to 0} \frac{\sin x}{x} = 1$$</div>
                                <p style="margin-top: 10px;">è¿™æ˜¯æ´›å¿…è¾¾æ³•åˆ™æœ€ç»å…¸çš„ä¾‹å­</p>
                            </div>
                            <div class="example-card">
                                <h4>ä¾‹é¢˜ 2ï¼šæŒ‡æ•°å‡½æ•°</h4>
                                <div class="formula-display">$$\lim_{x \to 0} \frac{e^x - 1}{x} = 1$$</div>
                                <p style="margin-top: 10px;">æ¶‰åŠæŒ‡æ•°å‡½æ•°çš„æœªå®šå¼</p>
                            </div>
                            <div class="example-card">
                                <h4>ä¾‹é¢˜ 3ï¼šå¯¹æ•°å‡½æ•°</h4>
                                <div class="formula-display">$$\lim_{x \to 1} \frac{\ln x}{x - 1} = 1$$</div>
                                <p style="margin-top: 10px;">å¯¹æ•°å‡½æ•°çš„åº”ç”¨</p>
                            </div>
                            <div class="example-card">
                                <h4>ä¾‹é¢˜ 4ï¼šå¤šæ¬¡ä½¿ç”¨</h4>
                                <div class="formula-display">$$\lim_{x \to 0} \frac{x - \sin x}{x^3} = \frac{1}{6}$$</div>
                                <p style="margin-top: 10px;">éœ€è¦å¤šæ¬¡åº”ç”¨æ´›å¿…è¾¾æ³•åˆ™</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ç»ƒä¹ æ¨¡å¼é¡µ -->
                <div class="page-content" id="practice">
                    <div class="two-column">
                        <div class="column">
                            <div class="card">
                                <h3>âœï¸ ç»ƒä¹ é¢˜ç›®</h3>
                                <div id="practiceQuestion" class="formula-display" style="min-height: 80px;">
                                    ç‚¹å‡»"ç”Ÿæˆé¢˜ç›®"å¼€å§‹ç»ƒä¹ 
                                </div>
                                <div class="btn-group">
                                    <button class="action" onclick="generateProblem()">ç”Ÿæˆé¢˜ç›®</button>
                                    <button class="action secondary" onclick="showHint()">æç¤º</button>
                                    <button class="action danger" onclick="showAnswer()">æŸ¥çœ‹ç­”æ¡ˆ</button>
                                </div>
                            </div>
                            
                            <div class="card">
                                <h3>ğŸ’¡ æç¤ºåŒºåŸŸ</h3>
                                <div id="hintArea" style="min-height: 100px; padding: 10px; background: var(--gray-50); border-radius: 8px;">
                                    æç¤ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º...
                                </div>
                            </div>
                        </div>
                        
                        <div class="column">
                            <div class="card">
                                <h3>ğŸ“ˆ ç»ƒä¹ ç»Ÿè®¡</h3>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                                    <div style="padding: 10px; background: var(--gray-50); border-radius: 8px; text-align: center;">
                                        <div style="font-size: 24px; font-weight: bold; color: var(--primary);">0</div>
                                        <div style="font-size: 14px; color: var(--gray-600);">å·²å®Œæˆ</div>
                                    </div>
                                    <div style="padding: 10px; background: var(--gray-50); border-radius: 8px; text-align: center;">
                                        <div style="font-size: 24px; font-weight: bold; color: var(--success);">0%</div>
                                        <div style="font-size: 14px; color: var(--gray-600);">æ­£ç¡®ç‡</div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="card">
                                <h3>ğŸ¯ ç­”æ¡ˆåŒºåŸŸ</h3>
                                <div id="answerArea" class="formula-display" style="min-height: 80px;">
                                    ç­”æ¡ˆå°†åœ¨è¿™é‡Œæ˜¾ç¤º...
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // é¡µé¢åˆ‡æ¢é€»è¾‘
        const navBtns = document.querySelectorAll('.nav-btn');
        const pages = document.querySelectorAll('.page-content');
        
        navBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                const targetPage = btn.dataset.page;
                
                // æ›´æ–°æŒ‰é’®çŠ¶æ€
                navBtns.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                
                // æ›´æ–°é¡µé¢æ˜¾ç¤º
                pages.forEach(page => page.classList.remove('active'));
                document.getElementById(targetPage).classList.add('active');
                
                // è§¦å‘MathJaxé‡æ–°æ¸²æŸ“
                if (window.MathJax) {
                    MathJax.typeset();
                }
                
                // å¦‚æœåˆ‡æ¢åˆ°å¯è§†åŒ–é¡µé¢ï¼Œåˆå§‹åŒ–å›¾å½¢
                if (targetPage === 'visualize') {
                    setTimeout(() => {
                        drawAnimation();
                        updateVisualizationFormulas();
                    }, 100);
                }
            });
        });
        
        // æ»‘å—å€¼æ›´æ–°
        const limitPoint = document.getElementById('limitPoint');
        const limitValue = document.getElementById('limitValue');
        if (limitPoint) {
            limitPoint.addEventListener('input', () => {
                limitValue.textContent = limitPoint.value;
            });
        }
        
        // å¯è§†åŒ–é¡µé¢çš„æ»‘å—æ›´æ–°
        const animSpeed = document.getElementById('animSpeed');
        const speedValue = document.getElementById('speedValue');
        if (animSpeed) {
            animSpeed.addEventListener('input', () => {
                speedValue.textContent = animSpeed.value;
            });
        }
        
        const zoomLevel = document.getElementById('zoomLevel');
        const zoomValue = document.getElementById('zoomValue');
        if (zoomLevel) {
            zoomLevel.addEventListener('input', () => {
                zoomValue.textContent = zoomLevel.value;
                if (animationId) {
                    drawAnimation();
                }
            });
        }
        
        // å¯è§†åŒ–åŠ¨ç”»å˜é‡
        let animationId = null;
        let animX = -3;
        let animationPaused = false;
        
        // å‡½æ•°å®šä¹‰
        const functions = {
            'sinx/x': {
                f: (x) => Math.abs(x) < 0.001 ? 1 : Math.sin(x) / x,
                df: (x) => Math.abs(x) < 0.001 ? 0 : (Math.cos(x) * x - Math.sin(x)) / (x * x),
                fName: '\\sin x',
                gName: 'x',
                dfName: '\\cos x',
                dgName: '1',
                limit: 1
            },
            '(e^x-1)/x': {
                f: (x) => Math.abs(x) < 0.001 ? 1 : (Math.exp(x) - 1) / x,
                df: (x) => Math.abs(x) < 0.001 ? 1 : (Math.exp(x) * x - (Math.exp(x) - 1)) / (x * x),
                fName: 'e^x - 1',
                gName: 'x',
                dfName: 'e^x',
                dgName: '1',
                limit: 1
            },
            'ln(1+x)/x': {
                f: (x) => Math.abs(x) < 0.001 ? 1 : Math.log(1 + x) / x,
                df: (x) => Math.abs(x) < 0.001 ? 0 : (1/(1+x) * x - Math.log(1+x)) / (x * x),
                fName: '\\ln(1+x)',
                gName: 'x',
                dfName: '\\frac{1}{1+x}',
                dgName: '1',
                limit: 1
            },
            '(1-cosx)/x^2': {
                f: (x) => Math.abs(x) < 0.001 ? 0.5 : (1 - Math.cos(x)) / (x * x),
                df: (x) => Math.abs(x) < 0.001 ? 0 : Math.sin(x) / (2 * x),
                fName: '1 - \\cos x',
                gName: 'x^2',
                dfName: '\\sin x',
                dgName: '2x',
                limit: 0.5
            }
        };
        
        // ç»˜åˆ¶å¯è§†åŒ–åŠ¨ç”»
        function drawAnimation() {
            const canvas = document.getElementById('animCanvas');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            
            const width = canvas.width;
            const height = canvas.height;
            const centerX = width / 2;
            const centerY = height / 2;
            const scale = parseInt(zoomLevel?.value || 50);
            
            // æ¸…ç©ºç”»å¸ƒ
            ctx.clearRect(0, 0, width, height);
            
            // ç»˜åˆ¶ç½‘æ ¼
            ctx.strokeStyle = '#f0f0f0';
            ctx.lineWidth = 0.5;
            for (let i = 0; i <= width; i += scale) {
                ctx.beginPath();
                ctx.moveTo(i, 0);
                ctx.lineTo(i, height);
                ctx.stroke();
            }
            for (let i = 0; i <= height; i += scale) {
                ctx.beginPath();
                ctx.moveTo(0, i);
                ctx.lineTo(width, i);
                ctx.stroke();
            }
            
            // ç»˜åˆ¶åæ ‡è½´
            ctx.strokeStyle = '#9ca3af';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(0, centerY);
            ctx.lineTo(width, centerY);
            ctx.moveTo(centerX, 0);
            ctx.lineTo(centerX, height);
            ctx.stroke();
            
            // ç»˜åˆ¶åˆ»åº¦å’Œæ ‡ç­¾
            ctx.fillStyle = '#6b7280';
            ctx.font = '12px Arial';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'top';
            
            for (let x = -5; x <= 5; x++) {
                if (x !== 0) {
                    const px = centerX + x * scale;
                    ctx.fillText(x.toString(), px, centerY + 5);
                    ctx.beginPath();
                    ctx.moveTo(px, centerY - 3);
                    ctx.lineTo(px, centerY + 3);
                    ctx.stroke();
                }
            }
            
            // è·å–å½“å‰å‡½æ•°
            const funcKey = document.getElementById('vizFunc')?.value || 'sinx/x';
            const func = functions[funcKey];
            
            // ç»˜åˆ¶å‡½æ•°æ›²çº¿
            ctx.strokeStyle = '#3b82f6';
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            let firstPoint = true;
            for (let px = 0; px < width; px++) {
                const x = (px - centerX) / scale;
                if (Math.abs(x) > 5) continue;
                
                const y = func.f(x);
                if (!isFinite(y) || Math.abs(y) > 10) continue;
                
                const py = centerY - y * scale;
                
                if (firstPoint) {
                    ctx.moveTo(px, py);
                    firstPoint = false;
                } else {
                    ctx.lineTo(px, py);
                }
            }
            ctx.stroke();
            
            // ç»˜åˆ¶åŠ¨ç”»ç‚¹
            if (Math.abs(animX) <= 5) {
                const y = func.f(animX);
                if (isFinite(y)) {
                    const px = centerX + animX * scale;
                    const py = centerY - y * scale;
                    
                    // ç»˜åˆ¶ç‚¹
                    ctx.fillStyle = '#10b981';
                    ctx.beginPath();
                    ctx.arc(px, py, 6, 0, 2 * Math.PI);
                    ctx.fill();
                    
                    // ç»˜åˆ¶å‚ç›´çº¿
                    ctx.strokeStyle = 'rgba(16, 185, 129, 0.3)';
                    ctx.lineWidth = 1;
                    ctx.setLineDash([5, 5]);
                    ctx.beginPath();
                    ctx.moveTo(px, py);
                    ctx.lineTo(px, centerY);
                    ctx.stroke();
                    ctx.setLineDash([]);
                    
                    // æ›´æ–°æ•°å€¼æ˜¾ç¤º
                    document.getElementById('currentX').textContent = animX.toFixed(3);
                    document.getElementById('currentY').textContent = y.toFixed(4);
                    
                    const deriv = func.df(animX);
                    document.getElementById('currentDeriv').textContent = isFinite(deriv) ? deriv.toFixed(4) : '--';
                    
                    // é«˜äº®æ­¥éª¤
                    if (Math.abs(animX) < 0.5) {
                        document.getElementById('viz-step3').classList.add('active');
                        document.getElementById('viz-step2').classList.add('success');
                    } else if (Math.abs(animX) < 1.5) {
                        document.getElementById('viz-step2').classList.add('active');
                        document.getElementById('viz-step1').classList.add('success');
                        document.getElementById('viz-step3').classList.remove('active');
                    } else {
                        document.getElementById('viz-step1').classList.add('active');
                        document.getElementById('viz-step2').classList.remove('active', 'success');
                        document.getElementById('viz-step3').classList.remove('active');
                    }
                }
            }
            
            // ç»˜åˆ¶æé™ç‚¹
            ctx.fillStyle = '#ef4444';
            ctx.beginPath();
            ctx.arc(centerX, centerY - func.limit * scale, 5, 0, 2 * Math.PI);
            ctx.fill();
            
            // æ·»åŠ æé™å€¼æ ‡ç­¾
            ctx.fillStyle = '#ef4444';
            ctx.font = '14px Arial';
            ctx.fillText(`æé™å€¼: ${func.limit}`, centerX + 30, centerY - func.limit * scale);
        }
        
        // å¼€å§‹åŠ¨ç”»
        function startAnimation() {
            if (animationId) return;
            
            animationPaused = false;
            const speed = parseInt(animSpeed?.value || 5);
            
            function animate() {
                if (animationPaused) {
                    animationId = null;
                    return;
                }
                
                drawAnimation();
                
                animX += 0.01 * speed;
                if (animX > 3) {
                    animX = -3;
                }
                
                animationId = requestAnimationFrame(animate);
            }
            
            animate();
            updateVisualizationFormulas();
        }
        
        // æš‚åœåŠ¨ç”»
        function pauseAnimation() {
            animationPaused = true;
            if (animationId) {
                cancelAnimationFrame(animationId);
                animationId = null;
            }
        }
        
        // é‡ç½®åŠ¨ç”»
        function resetAnimation() {
            pauseAnimation();
            animX = -3;
            drawAnimation();
            
            // é‡ç½®æ­¥éª¤é«˜äº®
            document.getElementById('viz-step1')?.classList.remove('active', 'success');
            document.getElementById('viz-step2')?.classList.remove('active', 'success');
            document.getElementById('viz-step3')?.classList.remove('active', 'success');
            
            // é‡ç½®æ•°å€¼æ˜¾ç¤º
            document.getElementById('currentX').textContent = '0.00';
            document.getElementById('currentY').textContent = '--';
            document.getElementById('currentDeriv').textContent = '--';
        }
        
        // æ›´æ–°å¯è§†åŒ–é¡µé¢çš„å…¬å¼æ˜¾ç¤º
        function updateVisualizationFormulas() {
            const funcKey = document.getElementById('vizFunc')?.value || 'sinx/x';
            const func = functions[funcKey];
            
            document.getElementById('viz-func-display').innerHTML = `$\\frac{${func.fName}}{${func.gName}}$`;
            document.getElementById('viz-deriv-display').innerHTML = `$\\frac{${func.dfName}}{${func.dgName}}$`;
            document.getElementById('viz-limit-display').innerHTML = `$\\lim_{x \\to 0} \\frac{${func.dfName}}{${func.dgName}} = ${func.limit}$`;
            document.getElementById('limitResult').textContent = func.limit.toString();
            
            if (window.MathJax) {
                MathJax.typeset();
            }
        }
        
        // å‡½æ•°é€‰æ‹©æ”¹å˜æ—¶æ›´æ–°
        document.getElementById('vizFunc')?.addEventListener('change', () => {
            updateVisualizationFormulas();
            if (animationId) {
                drawAnimation();
            }
        });
        
        // è®¡ç®—å™¨åŠŸèƒ½
        function calculate() {
            const stepsContainer = document.getElementById('calcSteps');
            const resultContainer = document.getElementById('result');
            const funcSelect = document.getElementById('funcSelect');
            
            // æ¸…ç©ºä¹‹å‰çš„æ­¥éª¤
            stepsContainer.innerHTML = '';
            
            // æ¨¡æ‹Ÿè®¡ç®—æ­¥éª¤
            const steps = [
                { title: 'æ­¥éª¤ 1ï¼šè¯†åˆ«æœªå®šå¼ç±»å‹', content: 'ä»£å…¥ x = 0ï¼Œå¾—åˆ° 0/0 å‹æœªå®šå¼', status: 'active' },
                { title: 'æ­¥éª¤ 2ï¼šåº”ç”¨æ´›å¿…è¾¾æ³•åˆ™', content: 'å¯¹åˆ†å­åˆ†æ¯åˆ†åˆ«æ±‚å¯¼', status: '' },
                { title: 'æ­¥éª¤ 3ï¼šæ±‚å¯¼è®¡ç®—', content: 'åˆ†å­å¯¼æ•°ï¼šcos(x)ï¼Œåˆ†æ¯å¯¼æ•°ï¼š1', status: '' },
                { title: 'æ­¥éª¤ 4ï¼šè®¡ç®—æé™', content: '$$\\lim_{x \\to 0} \\cos(x) = 1$$', status: '' }
            ];
            
            // é€æ­¥æ˜¾ç¤ºè®¡ç®—è¿‡ç¨‹
            steps.forEach((step, index) => {
                setTimeout(() => {
                    const stepDiv = document.createElement('div');
                    stepDiv.className = 'flow-step ' + (index === 0 ? 'active' : '');
                    stepDiv.innerHTML = `
                        <h4>${step.title}</h4>
                        <p>${step.content}</p>
                    `;
                    stepsContainer.appendChild(stepDiv);
                    
                    // æ›´æ–°å‰ä¸€ä¸ªæ­¥éª¤çš„çŠ¶æ€
                    if (index > 0) {
                        stepsContainer.children[index - 1].classList.remove('active');
                        stepsContainer.children[index - 1].classList.add('success');
                        stepDiv.classList.add('active');
                    }
                    
                    // æœ€åä¸€æ­¥æ—¶æ˜¾ç¤ºç»“æœ
                    if (index === steps.length - 1) {
                        setTimeout(() => {
                            stepDiv.classList.remove('active');
                            stepDiv.classList.add('success');
                            resultContainer.className = 'status-box complete';
                            resultContainer.innerHTML = '<h4>æé™å€¼ = 1</h4><p>è®¡ç®—å®Œæˆï¼</p>';
                            MathJax.typeset();
                        }, 1000);
                    }
                    
                    MathJax.typeset();
                }, index * 1500);
            });
            
            // ç»˜åˆ¶å›¾å½¢
            drawGraph();
        }
        
        function reset() {
            document.getElementById('calcSteps').innerHTML = `
                <div class="flow-step">
                    <h4>ç­‰å¾…è¾“å…¥...</h4>
                    <p>è¯·é€‰æ‹©å‡½æ•°å¹¶ç‚¹å‡»"å¼€å§‹è®¡ç®—"</p>
                </div>
            `;
            document.getElementById('result').className = 'status-box';
            document.getElementById('result').innerHTML = '<p>ç­‰å¾…è®¡ç®—...</p>';
            
            const canvas = document.getElementById('graph');
            if (canvas) {
                const ctx = canvas.getContext('2d');
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            }
        }
        
        function drawGraph() {
            const canvas = document.getElementById('graph');
            if (!canvas) return;
            
            const ctx = canvas.getContext('2d');
            canvas.width = canvas.offsetWidth;
            canvas.height = canvas.offsetHeight;
            
            const width = canvas.width;
            const height = canvas.height;
            const centerX = width / 2;
            const centerY = height / 2;
            
            // æ¸…ç©ºç”»å¸ƒ
            ctx.clearRect(0, 0, width, height);
            
            // ç»˜åˆ¶åæ ‡è½´
            ctx.strokeStyle = '#d1d5db';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.moveTo(0, centerY);
            ctx.lineTo(width, centerY);
            ctx.moveTo(centerX, 0);
            ctx.lineTo(centerX, height);
            ctx.stroke();
            
            // ç»˜åˆ¶å‡½æ•°æ›²çº¿ sin(x)/x
            ctx.strokeStyle = '#3b82f6';
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            for (let px = 0; px < width; px++) {
                const x = (px - centerX) / 50;
                let y;
                if (Math.abs(x) < 0.001) {
                    y = 1; // æé™å€¼
                } else {
                    y = Math.sin(x) / x;
                }
                const py = centerY - y * 50;
                
                if (px === 0) {
                    ctx.moveTo(px, py);
                } else {
                    ctx.lineTo(px, py);
                }
            }
            ctx.stroke();
            
            // ç»˜åˆ¶æé™ç‚¹
            ctx.fillStyle = '#10b981';
            ctx.beginPath();
            ctx.arc(centerX, centerY - 50, 5, 0, 2 * Math.PI);
            ctx.fill();
        }
        
        // ç»ƒä¹ æ¨¡å¼åŠŸèƒ½
        const problems = [
            { question: '\\lim_{x \\to 0} \\frac{\\sin x}{x}', answer: '1', hint: 'è¿™æ˜¯æœ€åŸºç¡€çš„0/0å‹ï¼Œç›´æ¥åº”ç”¨æ´›å¿…è¾¾æ³•åˆ™' },
            { question: '\\lim_{x \\to 0} \\frac{e^x - 1}{x}', answer: '1', hint: 'æŒ‡æ•°å‡½æ•°çš„å¯¼æ•°æ˜¯å®ƒæœ¬èº«' },
            { question: '\\lim_{x \\to 0} \\frac{\\ln(1+x)}{x}', answer: '1', hint: 'ln(1+x)çš„å¯¼æ•°æ˜¯1/(1+x)' },
            { question: '\\lim_{x \\to 0} \\frac{1 - \\cos x}{x^2}', answer: '\\frac{1}{2}', hint: 'å¯èƒ½éœ€è¦åº”ç”¨ä¸¤æ¬¡æ´›å¿…è¾¾æ³•åˆ™' }
        ];
        
        let currentProblem = null;
        
        function generateProblem() {
            currentProblem = problems[Math.floor(Math.random() * problems.length)];
            const questionDiv = document.getElementById('practiceQuestion');
            questionDiv.innerHTML = `$$${currentProblem.question} = ?$$`;
            document.getElementById('hintArea').innerHTML = 'æç¤ºå°†åœ¨è¿™é‡Œæ˜¾ç¤º...';
            document.getElementById('answerArea').innerHTML = 'ç­”æ¡ˆå°†åœ¨è¿™é‡Œæ˜¾ç¤º...';
            MathJax.typeset();
        }
        
        function showHint() {
            if (currentProblem) {
                document.getElementById('hintArea').innerHTML = `<strong>æç¤ºï¼š</strong>${currentProblem.hint}`;
            }
        }
        
        function showAnswer() {
            if (currentProblem) {
                document.getElementById('answerArea').innerHTML = `$$${currentProblem.question} = ${currentProblem.answer}$$`;
                MathJax.typeset();
            }
        }
        
        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.addEventListener('load', () => {
            // è§¦å‘MathJaxæ¸²æŸ“
            if (window.MathJax) {
                MathJax.typeset();
            }
        });
    </script>
</body>
</html>