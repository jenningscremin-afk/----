<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ´›å¿…è¾¾æ³•åˆ™å®éªŒå®¤</title>

    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
            },
            startup: {
                pageReady: () => {
                    return MathJax.startup.defaultPageReady().then(() => {
                        console.log('MathJaxåŠ è½½å®Œæˆ');
                    });
                }
            }
        };
    </script>
    <script defer src="../common-assets/js/mathjax-3.2.2-tex-svg.min.js"></script>

    <style>
    :root {
        --primary: #4f46e5;
        --primary-dark: #3730a3;
        --primary-light: #6366f1;
        --success: #10b981;
        --warning: #f59e0b;
        --danger: #ef4444;
        --gray-50: #f9fafb;
        --gray-100: #f3f4f6;
        --gray-200: #e5e7eb;
        --gray-300: #d1d5db;
        --gray-500: #6b7280;
        --gray-600: #4b5563;
        --gray-700: #1f2937;
        --white: #ffffff;
        --light: #ffffff;
        --border: #e5e7eb;
        --h1-size: 22px;
        --h3-size: 18px;
        --text-size: 16px;
        --formula-size: 20px;
    }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        *::-webkit-scrollbar { width: 0; background: transparent; }
        * { scrollbar-width: none; -ms-overflow-style: none; }

            body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Microsoft YaHei", Arial, sans-serif;
        font-size: var(--text-size);
        line-height: 1.5;
        background: var(--gray-50);
        color: var(--gray-700);
    }

            .container {
        width: 100%;
        max-width: 1400px;
        height: min(100vh, 700px);
        margin: 0 auto;
        display: flex;
        flex-direction: column;
        background: var(--white);
    }

            .header {
        height: 40px;
        background: var(--primary);
        color: var(--white);
        display: flex;
        align-items: center;
        padding: 0 20px;
    }

            .header h1 { font-size: var(--h1-size); margin: 0; }

            .main { flex: 1; display: flex; overflow: hidden; }

            .sidebar {
        width: 120px;
        background: var(--gray-50);
        border-right: 1px solid var(--border);
        padding: 10px 8px;
        display: flex;
        flex-direction: column;
        gap: 8px;
    }

            .nav-btn {
        width: 100%;
        padding: 8px;
        background: transparent;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        font-size: var(--text-size);
        color: var(--gray-600);
        text-align: left;
        transition: background 0.2s ease, color 0.2s ease;
    }

            .nav-btn.active { background: var(--primary); color: var(--white); }

            .nav-btn:hover { background: var(--gray-100); }

            .content {
        flex: 1;
        position: relative;
        overflow: hidden;
        padding: 0;
    }
            .page-content {
        display: none;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        gap: 18px;
        height: 100%;
        padding: 16px;
    }

    .page-content.active {
        display: grid;
    }

            .column { display: flex; flex-direction: column; gap: 16px; overflow-y: auto; padding-right: 4px; }

            .card { background: var(--white); border: 1px solid var(--border); border-radius: 12px; padding: 12px; display: flex; flex-direction: column; gap: 10px; }

        .card h3 { font-size: var(--h3-size); color: var(--primary-dark); }
        .card p { line-height: 1.5; }
        .card-scroll { overflow-y: auto; }

        .tag-list { display: flex; gap: 8px; flex-wrap: wrap; }
        .tag { font-size: 13px; padding: 4px 10px; border-radius: 999px; background: var(--gray-100); color: var(--gray-500); }

        table { width: 100%; border-collapse: collapse; font-size: 15px; }
        th, td { border: 1px solid var(--gray-200); padding: 8px; text-align: center; }
        thead { background: var(--gray-100); }

        .info-grid { display: grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap: 12px; }
        .info-item { background: var(--gray-50); border: 1px solid var(--gray-200); border-radius: 10px; padding: 10px; font-size: 15px; }
        .info-item strong { display: block; margin-bottom: 6px; color: var(--primary-dark); }

        .controls { display: flex; flex-direction: column; gap: 10px; background: var(--gray-50); border: 1px solid var(--gray-200); border-radius: 10px; padding: 10px; }
        .control-row { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; }
        .control-row label { font-weight: 600; }
        .control-row span { color: var(--primary-dark); font-weight: 600; }
        select { flex: 1; padding: 6px 8px; border-radius: 8px; border: 1px solid var(--gray-300); font-size: 15px; }
        input[type="range"] { flex: 1; }

        .btn-group { display: flex; gap: 10px; }
        button.action {
            flex: 1;
            background: var(--primary);
            color: var(--white);
            border: none;
            border-radius: 8px;
            padding: 10px 12px;
            font-size: var(--text-size);
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            position: relative;
            z-index: 10;
            pointer-events: auto;
        }

        button.action.secondary {
            background: var(--white);
            color: var(--primary);
            border: 1px solid var(--primary);
        }

        button.action.danger { background: var(--danger); }
        button.action:hover { transform: translateY(-2px); }

        .flow-container {
            display: flex;
            flex-direction: column;
            gap: 12px;
            overflow-y: auto;
            padding-right: 4px;
        }

        .flow-step {
            position: relative;
            border: 1px solid var(--gray-200);
            border-radius: 10px;
            padding: 10px 12px;
            background: var(--gray-50);
            transition: border 0.2s ease, background 0.2s ease, transform 0.2s ease;
        }

        .flow-step::before {
            content: '';
            position: absolute;
            left: 18px;
            top: -12px;
            width: 2px;
            height: 12px;
            background: var(--gray-200);
        }

        .flow-step:first-child::before { display: none; }

        .flow-step.active {
            border-color: var(--primary);
            background: #eef2ff;
            transform: translateX(4px);
        }

        .flow-step.success { border-color: var(--success); }
        .flow-step.error { border-color: var(--danger); background: #fee2e2; }

        .flow-step h4 { font-size: 15px; margin-bottom: 4px; color: var(--primary-dark); }
        .flow-step p { font-size: 14px; color: var(--gray-600); line-height: 1.4; }

        .canvas-wrapper {
            border: 1px solid var(--gray-200);
            border-radius: 12px;
            background: var(--gray-50);
            padding: 8px;
            display: flex;
            flex-direction: column;
            gap: 6px;
            flex: 1;
        }

        .canvas-wrapper canvas {
            width: 100%;
            height: 260px;
            border-radius: 8px;
            background: var(--white);
        }

        .legend { display: flex; gap: 12px; flex-wrap: wrap; font-size: 14px; color: var(--gray-600); }
        .legend span { display: flex; align-items: center; gap: 6px; }
        .legend i { width: 14px; height: 14px; border-radius: 4px; display: inline-block; }

        .status-box {
            border-radius: 10px;
            padding: 10px;
            font-size: 14px;
            background: #eef2ff;
            color: var(--primary-dark);
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>æ´›å¿…è¾¾æ³•åˆ™å®éªŒå®¤</h1>
            <div>æŠŠæé™æ¨å¯¼è¿‡ç¨‹æ‹†æˆå¯è§†åŒ–æ­¥éª¤</div>
        </header>
        <div class="main">
            <nav class="sidebar">
                <button class="nav-btn active" data-section="zero">0/0 å‹</button>
                <button class="nav-btn" data-section="infty">âˆ/âˆ å‹</button>
                <button class="nav-btn" data-section="other">å…¶ä»–ç±»å‹è½¬åŒ–</button>
            </nav>
            <section class="content">
                <!-- 0/0 å‹é¡µé¢ -->
                <div class="page-content active" id="zero">
                    <div class="column">
                        <div class="card card-scroll">
                            <h3>å­¦ä¹ æŒ‡å¼•</h3>
                            <p>æ´›å¿…è¾¾æ³•åˆ™çš„å…³é”®æ˜¯å°†æé™åŒ–æˆ $\dfrac{0}{0}$ æˆ– $\dfrac{\infty}{\infty}$ å‹ï¼Œç„¶ååŒæ­¥å¯¹åˆ†å­ã€åˆ†æ¯æ±‚å¯¼ã€‚å®éªŒåŒºå°†æ¯ä¸€æ­¥æ‹†è§£ä¸ºå¯è§†åŒ–èŠ‚ç‚¹ï¼Œä½ å¯ä»¥åˆ†æ­¥æ¨è¿›æˆ–è‡ªåŠ¨æ’­æ”¾ä»¥è§‚å¯Ÿå…¬å¼çš„æ¼”å˜ã€‚</p>
                            <div class="tag-list">
                                <span class="tag">æé™åˆ¤æ–­</span>
                                <span class="tag">åˆ†æ­¥æ±‚å¯¼</span>
                                <span class="tag">å¼‚å¸¸æ£€æµ‹</span>
                                <span class="tag">æ¡ˆä¾‹åˆ‡æ¢</span>
                            </div>
                            <div class="status-box" id="caseDescription">å½“å‰æ¡ˆä¾‹ï¼š$\displaystyle \lim_{x \to 0} \dfrac{\sin x}{x}$ï¼ŒåŸå¼ç›´æ¥ä»£å…¥å¾—åˆ° $\dfrac{0}{0}$ å‹ï¼Œå¯åº”ç”¨æ´›å¿…è¾¾æ³•åˆ™ã€‚</div>
                        </div>

                        <div class="card card-scroll">
                            <h3>å…¸å‹ä¸å®šå¼ç±»å‹é€ŸæŸ¥</h3>
                            <table>
                                <thead>
                                    <tr>
                                        <th>ç±»å‹</th>
                                        <th>è½¬åŒ–æ€è·¯</th>
                                        <th>ç¤ºä¾‹</th>
                                    </tr>
                                </thead>
                                <tbody id="typeTable"></tbody>
                            </table>
                        </div>

                        <div class="card">
                            <h3>ç»“è®ºé€Ÿè®°</h3>
                            <div class="info-grid">
                                <div class="info-item">
                                    <strong>é€‚ç”¨æ¡ä»¶</strong>
                                    åˆ†å­ã€åˆ†æ¯åœ¨ç‚¹é™„è¿‘å¯å¯¼ï¼Œä¸” $\dfrac{f'(x)}{g'(x)}$ çš„æé™å­˜åœ¨æˆ–ä¸º $\pm\infty$ã€‚
                                </div>
                                <div class="info-item">
                                    <strong>é‡å¤ä½¿ç”¨</strong>
                                    æ±‚å¯¼ä¸€æ¬¡åä»æ˜¯ä¸å®šå¼æ—¶ï¼Œå¯ç»§ç»­æ±‚å¯¼ï¼Œæ³¨æ„ä¿ç•™æ¡ä»¶æ£€æŸ¥ã€‚
                                </div>
                                <div class="info-item">
                                    <strong>ç±»å‹è½¬åŒ–</strong>
                                    $0 \cdot \infty, \infty - \infty, 1^{\infty}$ ç­‰å¯ä»¥é€šè¿‡ä»£æ•°å˜å½¢æˆ–å–å¯¹æ•°è½¬åŒ–ã€‚
                                </div>
                                <div class="info-item">
                                    <strong>å·¥ç¨‹æ„ä¹‰</strong>
                                    åœ¨ä¼ æ„Ÿã€ææ–™å“åº”ç­‰é¢†åŸŸï¼Œæ´›å¿…è¾¾æ³•åˆ™å¯å¿«é€Ÿä¼°è®¡æç«¯çŠ¶æ€çš„å˜åŒ–ç‡ã€‚
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="column">
                        <div class="card">
                            <h3>åˆ†æ­¥æ¨å¯¼æµç¨‹</h3>
                            <div class="controls">
                                <div class="control-row">
                                    <label>é€‰æ‹©ä¸å®šå¼ç±»å‹</label>
                                    <select id="caseSelector"></select>
                                </div>
                                <div class="control-row">
                                    <label>æ¨è¿›æ§åˆ¶</label>
                                    <div class="btn-group">
                                        <button class="action" id="startFlow">å¼€å§‹æ¼”ç¤º</button>
                                        <button class="action secondary" id="nextStep">ä¸‹ä¸€æ­¥</button>
                                        <button class="action secondary" id="resetFlow">é‡ç½®</button>
                                    </div>
                                </div>
                            </div>
                            <div class="flow-container" id="flowContainer"></div>
                        </div>

                        <div class="card">
                            <h3>å‡½æ•°è¡Œä¸ºä¸æ•°å€¼å¯¹æ¯”</h3>
                            <div class="canvas-wrapper">
                                <canvas id="lhopitalCanvas"></canvas>
                                <div class="legend">
                                    <span><i style="background:#2563eb"></i> $y=f(x)$</span>
                                    <span><i style="background:#ef4444"></i> $y=g(x)$</span>
                                    <span><i style="background:#10b981"></i> $y=\dfrac{f(x)}{g(x)}$</span>
                                </div>
                                <div class="controls">
                                    <div class="control-row">
                                        <label>æ¥è¿‘ç‚¹</label>
                                        <input type="range" id="approachSlider" min="0.0001" max="0.5" step="0.0001" value="0.1">
                                        <span id="approachValue">0.10</span>
                                    </div>
                                    <div class="control-row">
                                        <label>æ–¹å‘</label>
                                        <select id="directionSelector">
                                            <option value="right">å³ä¾§æ¥è¿‘</option>
                                            <option value="left">å·¦ä¾§æ¥è¿‘</option>
                                            <option value="both">ä¸¤ä¾§å¯¹æ¯”</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="info-grid">
                                    <div class="info-item">
                                        <strong>å‡½æ•°å€¼</strong>
                                        <span id="valueInfo">$f(x)=0.0000$, $g(x)=0.0000$</span>
                                    </div>
                                    <div class="info-item">
                                        <strong>æ¯”å€¼å˜åŒ–</strong>
                                        <span id="ratioInfo">$\dfrac{f(x)}{g(x)} = 1.0000$</span>
                                    </div>
                                    <div class="info-item">
                                        <strong>å¯¼æ•°æ¯”å€¼</strong>
                                        <span id="derivativeInfo">$\dfrac{f'(x)}{g'(x)} = 1.0000$</span>
                                    </div>
                                    <div class="info-item">
                                        <strong>ç»“è®ºæç¤º</strong>
                                        <span id="hintInfo">å¯¼æ•°æ¯”å€¼æé™å­˜åœ¨ï¼ŒåŸæé™ç­‰äº 1ã€‚</span>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <h3>å®é™…åº”ç”¨æ¡ˆä¾‹</h3>
                            <div class="info-grid">
                                <div class="info-item">
                                    <strong>ç‰©ç†åº”ç”¨</strong>
                                    ç¬æ—¶é€Ÿåº¦è®¡ç®—ï¼š$\lim_{t \to 0} \dfrac{s(t)-s(0)}{t}$
                                </div>
                                <div class="info-item">
                                    <strong>ç»æµå­¦åº”ç”¨</strong>
                                    è¾¹é™…æˆæœ¬åˆ†æï¼š$\lim_{\Delta x \to 0} \dfrac{C(x+\Delta x)-C(x)}{\Delta x}$
                                </div>
                                <div class="info-item">
                                    <strong>å·¥ç¨‹åº”ç”¨</strong>
                                    ææ–™åº”åŠ›åˆ†æï¼š$\lim_{\varepsilon \to 0} \dfrac{\sigma(\varepsilon)}{\varepsilon}$
                                </div>
                                <div class="info-item">
                                    <strong>ç”Ÿç‰©åŒ»å­¦</strong>
                                    è¯ç‰©æµ“åº¦å˜åŒ–ï¼š$\lim_{t \to 0} \dfrac{C(t)-C(0)}{t}$
                                </div>
                            </div>
                            <div class="status-box">
                                ğŸ’¡ æç¤ºï¼šæ´›å¿…è¾¾æ³•åˆ™åœ¨è§£å†³å®é™…å·¥ç¨‹é—®é¢˜æ—¶éå¸¸æœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨éœ€è¦åˆ†æç³»ç»Ÿåœ¨ä¸´ç•Œç‚¹é™„è¿‘çš„è¡Œä¸ºæ—¶ã€‚
                            </div>
                        </div>
                    </div>
                </div>

                <!-- âˆ/âˆ å‹é¡µé¢ -->
                <div class="page-content" id="infty">
                    <div class="column">
                        <div class="card card-scroll">
                            <h3>âˆ/âˆ å‹ä¸å®šå¼</h3>
                            <p>å½“åˆ†å­å’Œåˆ†æ¯éƒ½è¶‹äºæ— ç©·å¤§æ—¶ï¼Œæ´›å¿…è¾¾æ³•åˆ™åŒæ ·é€‚ç”¨ã€‚è¿™ç±»é—®é¢˜å¸¸è§äºå¤šé¡¹å¼ã€æŒ‡æ•°å‡½æ•°ç­‰æ¯”å€¼å½¢å¼ã€‚</p>
                            <div class="tag-list">
                                <span class="tag">å¤šé¡¹å¼æ¯”å€¼</span>
                                <span class="tag">æŒ‡æ•°å‡½æ•°</span>
                                <span class="tag">å¯¹æ•°å‡½æ•°</span>
                                <span class="tag">å¤åˆå‡½æ•°</span>
                            </div>
                            <div class="status-box">å½“å‰æ¡ˆä¾‹ï¼š$\displaystyle \lim_{x \to \infty} \dfrac{2x^2 - 3x}{x^2 + 1}$ï¼ŒåŸå¼ä¸º $\dfrac{\infty}{\infty}$ å‹ã€‚</div>
                        </div>
                        <div class="card">
                            <h3>âˆ/âˆ å‹ç‰¹ç‚¹</h3>
                            <div class="info-grid">
                                <div class="info-item">
                                    <strong>è¯†åˆ«ç‰¹å¾</strong>
                                    åˆ†å­åˆ†æ¯åŒæ—¶è¶‹äº $\pm\infty$ï¼Œéœ€è¦æ£€æŸ¥æé™æ–¹å‘ã€‚
                                </div>
                                <div class="info-item">
                                    <strong>å¤„ç†æ–¹æ³•</strong>
                                    ç›´æ¥å¯¹åˆ†å­åˆ†æ¯æ±‚å¯¼ï¼Œç„¶åè®¡ç®—æ–°æé™ã€‚
                                </div>
                                <div class="info-item">
                                    <strong>å¸¸è§é™·é˜±</strong>
                                    æ³¨æ„ $x \to +\infty$ å’Œ $x \to -\infty$ çš„åŒºåˆ«ã€‚
                                </div>
                                <div class="info-item">
                                    <strong>åº”ç”¨åœºæ™¯</strong>
                                    ç»æµå­¦ä¸­çš„è¾¹é™…åˆ†æã€å·¥ç¨‹ä¸­çš„æ¸è¿‘è¡Œä¸ºã€‚
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="column">
                        <div class="card">
                            <h3>âˆ/âˆ å‹æ¨å¯¼æ¼”ç¤º</h3>
                            <div class="canvas-wrapper">
                                <canvas id="inftyCanvas"></canvas>
                                <div class="legend">
                                    <span><i style="background:#2563eb"></i> $y=f(x)$</span>
                                    <span><i style="background:#ef4444"></i> $y=g(x)$</span>
                                    <span><i style="background:#10b981"></i> $y=\dfrac{f(x)}{g(x)}$</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- å…¶ä»–ç±»å‹è½¬åŒ–é¡µé¢ -->
                <div class="page-content" id="other">
                    <div class="column">
                        <div class="card card-scroll">
                            <h3>å…¶ä»–ç±»å‹è½¬åŒ–</h3>
                            <p>å¯¹äº $0 \cdot \infty$ã€$\infty - \infty$ã€$1^{\infty}$ ç­‰ç±»å‹ï¼Œéœ€è¦é€šè¿‡ä»£æ•°å˜å½¢æˆ–å–å¯¹æ•°è½¬åŒ–ä¸º $\dfrac{0}{0}$ æˆ– $\dfrac{\infty}{\infty}$ å‹ã€‚</p>
                            <div class="tag-list">
                                <span class="tag">0Â·âˆ å‹</span>
                                <span class="tag">âˆ-âˆ å‹</span>
                                <span class="tag">1^âˆ å‹</span>
                                <span class="tag">å–å¯¹æ•°æ³•</span>
                            </div>
                            <div class="status-box">å½“å‰æ¡ˆä¾‹ï¼š$\displaystyle \lim_{x \to 0^+} x^x$ï¼ŒåŸå¼ä¸º $1^{\infty}$ å‹ï¼Œéœ€è¦å–å¯¹æ•°è½¬åŒ–ã€‚</div>
                        </div>
                        <div class="card">
                            <h3>è½¬åŒ–æ–¹æ³•</h3>
                            <div class="info-grid">
                                <div class="info-item">
                                    <strong>0Â·âˆ å‹</strong>
                                    æ”¹å†™ä¸º $\dfrac{0}{1/\infty}$ æˆ– $\dfrac{\infty}{1/0}$ã€‚
                                </div>
                                <div class="info-item">
                                    <strong>âˆ-âˆ å‹</strong>
                                    é€šåˆ†æˆ–ä¹˜ä»¥å…±è½­ï¼Œç„¶ååŒ–ç®€ã€‚
                                </div>
                                <div class="info-item">
                                    <strong>1^âˆ å‹</strong>
                                    å–å¯¹æ•°ï¼š$\ln y = \infty \cdot \ln 1 = \infty \cdot 0$ã€‚
                                </div>
                                <div class="info-item">
                                    <strong>0^0 å‹</strong>
                                    å–å¯¹æ•°ï¼š$\ln y = 0 \cdot \ln 0 = 0 \cdot (-\infty)$ã€‚
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="column">
                        <div class="card">
                            <h3>è½¬åŒ–æ¼”ç¤º</h3>
                            <div class="canvas-wrapper">
                                <canvas id="otherCanvas"></canvas>
                                <div class="legend">
                                    <span><i style="background:#f59e0b"></i> åŸå‡½æ•°</span>
                                    <span><i style="background:#10b981"></i> è½¬åŒ–å</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <script>
        function renderMath() {
            if (window.MathJax && MathJax.typesetPromise) {
                MathJax.typesetPromise().catch(err => console.log('æ¸²æŸ“é”™è¯¯:', err));
            }
        }

        // ç¡®ä¿é¡µé¢åŠ è½½å®Œæˆåæ¸²æŸ“æ•°å­¦å…¬å¼
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(renderMath, 100);
        });

        function setupCanvas(canvas) {
            const ctx = canvas.getContext('2d');
            const rect = canvas.getBoundingClientRect();
            const dpr = window.devicePixelRatio || 1;
            canvas.width = rect.width * dpr;
            canvas.height = rect.height * dpr;
            canvas.style.width = rect.width + 'px';
            canvas.style.height = rect.height + 'px';
            ctx.scale(dpr, dpr);
            return { ctx, width: rect.width, height: rect.height };
        }

        function drawAxes(ctx, width, height) {
            const padding = 40;
            ctx.save();
            ctx.strokeStyle = '#e2e8f0';
            ctx.lineWidth = 1;
            for (let i = 0; i <= 8; i++) {
                const x = padding + i * (width - 2 * padding) / 8;
                ctx.beginPath();
                ctx.moveTo(x, padding);
                ctx.lineTo(x, height - padding);
                ctx.stroke();

                const y = padding + i * (height - 2 * padding) / 8;
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(width - padding, y);
                ctx.stroke();
            }

            ctx.strokeStyle = '#1f2937';
            ctx.lineWidth = 1.5;
            ctx.beginPath();
            ctx.moveTo(padding, height / 2);
            ctx.lineTo(width - padding, height / 2);
            ctx.stroke();
            ctx.beginPath();
            ctx.moveTo(width / 2, padding);
            ctx.lineTo(width / 2, height - padding);
            ctx.stroke();
            ctx.restore();
        }

        function mathToCanvas(x, y, width, height, xRange, yRange, padding = 40) {
            const plotWidth = width - 2 * padding;
            const plotHeight = height - 2 * padding;
            const cx = padding + (x - xRange[0]) / (xRange[1] - xRange[0]) * plotWidth;
            const cy = height - padding - (y - yRange[0]) / (yRange[1] - yRange[0]) * plotHeight;
            return { x: cx, y: cy };
        }

        const cases = {
            zero_zero: {
                type: '0/0 å‹',
                description: 'å½“å‰æ¡ˆä¾‹ï¼š$\\displaystyle \\lim_{x \\to 0} \\dfrac{\\sin x}{x}$ï¼ŒåŸå¼ä»£å…¥å¾—åˆ° $\\dfrac{0}{0}$ å‹ï¼Œå¯ç›´æ¥åº”ç”¨æ´›å¿…è¾¾æ³•åˆ™ã€‚',
                numerator: x => Math.sin(x),
                denominator: x => x,
                numeratorPrime: x => Math.cos(x),
                denominatorPrime: () => 1,
                limitPoint: 0,
                displayInterval: [-4, 4],
                ratioConclusion: 'å¯¼æ•°æ¯”å€¼æé™å­˜åœ¨ï¼ŒåŸæé™ç­‰äº 1ã€‚',
                steps: [
                    { title: 'æ£€æµ‹ä¸å®šå¼', detail: 'ä»£å…¥ $x=0$ å¾—åˆ° $\\dfrac{0}{0}$ å‹ï¼Œæ»¡è¶³æ´›å¿…è¾¾æ³•åˆ™çš„å½¢å¼ã€‚' },
                    { title: 'åŒæ­¥æ±‚å¯¼', detail: 'è®¡ç®— $f\\'(x)=\\cos x$, $g\\'(x)=1$ã€‚' },
                    { title: 'ä»£å…¥æé™ç‚¹', detail: 'ä»£å…¥ $x=0$ï¼Œæœ‰ $\\dfrac{f\\'(0)}{g\\'(0)} = 1$ã€‚' },
                    { title: 'ç»™å‡ºç»“è®º', detail: 'åŸæé™ $=1$ï¼Œä¸å¯¼æ•°æ¯”å€¼ä¸€è‡´ã€‚' }
                ]
            },
            infinity_infinity: {
                type: 'âˆ/âˆ å‹',
                description: 'å½“å‰æ¡ˆä¾‹ï¼š$\\displaystyle \\lim_{x \\to \\infty} \\dfrac{2x^2 - 3x}{x^2 + 1}$ï¼ŒåŸå¼ä¸º $\\dfrac{\\infty}{\\infty}$ å‹ï¼Œå¯å¯¹åˆ†å­åˆ†æ¯æ±‚å¯¼ã€‚',
                numerator: x => 2 * x * x - 3 * x,
                denominator: x => x * x + 1,
                numeratorPrime: x => 4 * x - 3,
                denominatorPrime: x => 2 * x,
                limitPoint: Infinity,
                displayInterval: [-2, 4],
                ratioConclusion: 'å¯¼æ•°æ¯”å€¼æé™ä¸º 2ï¼Œä¸åŸå‡½æ•°çš„æ°´å¹³æ¸è¿‘çº¿ä¸€è‡´ã€‚',
                steps: [
                    { title: 'æ£€æµ‹ä¸å®šå¼', detail: 'ä»¤ $x\\to\\infty$ï¼Œåˆ†å­åˆ†æ¯åŒè¶‹äº $\\infty$ï¼Œä¸º $\\dfrac{\\infty}{\\infty}$ å‹ã€‚' },
                    { title: 'åŒæ­¥æ±‚å¯¼', detail: 'è®¡ç®— $f\\'(x)=4x-3$, $g\\'(x)=2x$ã€‚' },
                    { title: 'åŒ–ç®€æ¯”å€¼', detail: 'å¾—åˆ° $\\dfrac{4x-3}{2x}$ï¼Œè¿›ä¸€æ­¥åŒ–ç®€ä¸º $2-\\dfrac{3}{2x}$ã€‚' },
                    { title: 'å–æé™', detail: 'ä»¤ $x\\to\\infty$ï¼Œ$\\dfrac{3}{2x}\\to 0$ï¼ŒåŸæé™ä¸º 2ã€‚' }
                ]
            },
            other: {
                type: 'å…¶ä»–ç±»å‹è½¬åŒ–',
                description: 'å½“å‰æ¡ˆä¾‹ï¼š$\\displaystyle \\lim_{x \\to 0^+} x^x$ï¼ŒåŸå¼ä¸º $1^{\\infty}$ å‹ï¼Œå…ˆå–å¯¹æ•°è½¬åŒ–ä¸º $\\dfrac{0}{0}$ å‹ã€‚',
                numerator: x => Math.log(x),
                denominator: x => 1 / x,
                numeratorPrime: x => 1 / x,
                denominatorPrime: x => -1 / (x * x),
                limitPoint: 0,
                displayInterval: [0.05, 3],
                ratioConclusion: 'å¯¹æ•°å¤„ç†åæé™ä¸º 0ï¼ŒåŸå¼æé™ä¸º 1ã€‚',
                steps: [
                    { title: 'è¯†åˆ«ç±»å‹', detail: 'åŸå¼æ˜¯ $1^{\\infty}$ å‹ï¼Œç›´æ¥ä½¿ç”¨æ´›å¿…è¾¾ä¸ä¾¿å¤„ç†ã€‚' },
                    { title: 'å–å¯¹æ•°', detail: 'ä»¤ $y = x^x$ï¼Œä¸¤è¾¹å–å¯¹æ•°å¾— $\\ln y = x\\ln x$ã€‚' },
                    { title: 'è½¬åŒ–å½¢å¼', detail: 'å°† $x\\ln x$ å†™æˆ $\\dfrac{\\ln x}{1/x}$ï¼Œå˜ä¸º $\\dfrac{0}{\\infty}$ å‹ã€‚' },
                    { title: 'åº”ç”¨æ³•åˆ™', detail: 'å¯¹åˆ†å­ä¸åˆ†æ¯æ±‚å¯¼å¹¶æ±‚æé™ï¼Œå¾—åˆ° $\\lim x\\ln x = 0$ï¼Œæ‰€ä»¥ $y = e^0 = 1$ã€‚' }
                ]
            }
        };

        const typeSummary = [
            { name: '$\\dfrac{0}{0}$ å‹', hint: 'ç›´æ¥æ£€æŸ¥åˆ†å­ã€åˆ†æ¯åœ¨æé™ç‚¹çš„å€¼ã€‚', example: '$\\displaystyle \\lim_{x \\to 0} \\dfrac{\\sin x}{x}$' },
            { name: '$\\dfrac{\\infty}{\\infty}$ å‹', hint: 'å¸¸è§äºé«˜é˜¶å¤šé¡¹å¼æˆ–æŒ‡æ•°æ¯”å€¼ã€‚', example: '$\\displaystyle \\lim_{x \\to \\infty} \\dfrac{2x^2-1}{x^2+3}$' },
            { name: '$0 \cdot \\infty$', hint: 'é€šè¿‡æ”¹å†™ä¸º $\\dfrac{0}{1/a}$ æˆ– $\\dfrac{\\infty}{1/b}$ã€‚', example: '$\\displaystyle \\lim_{x \\to 0^+} x \cdot \ln x$' },
            { name: '$\\infty - \\infty$', hint: 'å…ˆé€šåˆ†æˆ–ä¹˜ä»¥å…±è½­ï¼Œå†åˆ¤æ–­ç±»å‹ã€‚', example: '$\\displaystyle \\lim_{x \\to \\infty} (\\sqrt{x^2+x}-x)$' },
            { name: '$1^{\\infty}$ å‹', hint: 'å–å¯¹æ•°ï¼Œå°†å¹‚æŒ‡æ•°è½¬åŒ–ä¸ºä¹˜ç§¯å½¢å¼ã€‚', example: '$\\displaystyle \\lim_{x \\to \infty} \left(1+\frac{3}{x}\right)^x$' }
        ];

        const navButtons = document.querySelectorAll('.nav-btn');
        const pages = document.querySelectorAll('.page-content');
        const caseSelector = document.getElementById('caseSelector');
        const flowContainer = document.getElementById('flowContainer');
        const startFlowBtn = document.getElementById('startFlow');
        const nextStepBtn = document.getElementById('nextStep');
        const resetFlowBtn = document.getElementById('resetFlow');
        const caseDescription = document.getElementById('caseDescription');
        const typeTable = document.getElementById('typeTable');

        const approachSlider = document.getElementById('approachSlider');
        const approachValue = document.getElementById('approachValue');
        const directionSelector = document.getElementById('directionSelector');
        const valueInfo = document.getElementById('valueInfo');
        const ratioInfo = document.getElementById('ratioInfo');
        const derivativeInfo = document.getElementById('derivativeInfo');
        const hintInfo = document.getElementById('hintInfo');

        const canvas = document.getElementById('lhopitalCanvas');

        let currentCaseKey = 'zero_zero';
        let currentStepIndex = -1;
        let animationTimer = null;

        function populateTypeTable() {
            typeTable.innerHTML = typeSummary.map(row => `
                <tr>
                    <td>${row.name}</td>
                    <td>${row.hint}</td>
                    <td>${row.example}</td>
                </tr>
            `).join('');
            renderMath();
        }

        function populateCaseSelector() {
            Object.entries(cases).forEach(([key, item]) => {
                const option = document.createElement('option');
                option.value = key;
                option.innerHTML = item.type;
                caseSelector.appendChild(option);
            });
            caseSelector.value = currentCaseKey;
        }

        function buildFlowSteps() {
            const current = cases[currentCaseKey];
            flowContainer.innerHTML = '';
            current.steps.forEach((step, index) => {
                const div = document.createElement('div');
                div.className = 'flow-step';
                div.dataset.stepIndex = index;
                div.innerHTML = `
                    <h4>æ­¥éª¤ ${index + 1}</h4>
                    <p>${step.detail}</p>
                `;
                flowContainer.appendChild(div);
            });
            currentStepIndex = -1;
            renderMath();
        }

        function highlightStep(index) {
            const steps = flowContainer.querySelectorAll('.flow-step');
            steps.forEach(step => step.className = 'flow-step');
            if (index >= 0 && index < steps.length) {
                steps[index].classList.add('active');
                if (index === steps.length - 1) {
                    steps[index].classList.add('success');
                }
            }
            currentStepIndex = index;
        }

        function advanceStep() {
            const current = cases[currentCaseKey];
            const total = current.steps.length;
            if (currentStepIndex >= total - 1) return;
            highlightStep(currentStepIndex + 1);
        }

        function resetFlow() {
            clearInterval(animationTimer);
            animationTimer = null;
            startFlowBtn.textContent = 'å¼€å§‹æ¼”ç¤º';
            buildFlowSteps();
            updateCaseSummary();
            updateCanvas();
        }

        function toggleAnimation() {
            if (animationTimer) {
                clearInterval(animationTimer);
                animationTimer = null;
                startFlowBtn.textContent = 'å¼€å§‹æ¼”ç¤º';
                return;
            }
            startFlowBtn.textContent = 'æš‚åœæ¼”ç¤º';
            advanceStep();
            animationTimer = setInterval(() => {
                const current = cases[currentCaseKey];
                if (currentStepIndex >= current.steps.length - 1) {
                    clearInterval(animationTimer);
                    animationTimer = null;
                    startFlowBtn.textContent = 'å¼€å§‹æ¼”ç¤º';
                    return;
                }
                advanceStep();
            }, 2000);
        }

        function updateCaseSummary(sectionKey) {
            const item = cases[currentCaseKey];
            caseDescription.innerHTML = item.description;
            if (sectionKey) {
                hintInfo.textContent = item.ratioConclusion;
            }
        }

        function switchPage(section) {
            pages.forEach(page => {
                page.classList.toggle('active', page.id === section);
            });
            navButtons.forEach(btn => {
                btn.classList.toggle('active', btn.dataset.section === section);
            });

            if (section === 'zero') {
                currentCaseKey = 'zero_zero';
            } else if (section === 'infty') {
                currentCaseKey = 'infinity_infinity';
            } else {
                currentCaseKey = 'other';
            }
            caseSelector.value = currentCaseKey;
            resetFlow();
            updateCaseSummary(section);

            setTimeout(renderMath, 80);

            setTimeout(() => {
                if (section === 'zero') {
                    updateCanvas();
                } else if (section === 'infty') {
                    updateInftyCanvas();
                } else if (section === 'other') {
                    updateOtherCanvas();
                }
            }, 200);
        }

        navButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                switchPage(btn.dataset.section);
            });
        });

\n        caseSelector.addEventListener('change', () => {
            currentCaseKey = caseSelector.value;
            resetFlow();
            const btn = Array.from(navButtons).find(b => b.dataset.section === (currentCaseKey === 'zero_zero' ? 'zero' : currentCaseKey === 'infinity_infinity' ? 'infty' : 'other'));
            if (btn) updateCaseSummary(btn.dataset.section);
        });

        startFlowBtn.addEventListener('click', toggleAnimation);
        nextStepBtn.addEventListener('click', () => { advanceStep(); });
        resetFlowBtn.addEventListener('click', resetFlow);

        approachSlider.addEventListener('input', () => {
            approachValue.textContent = parseFloat(approachSlider.value).toFixed(2);
            updateCanvas();
        });

        directionSelector.addEventListener('change', () => {
            updateCanvas();
        });

        // æ·»åŠ ç¼ºå¤±çš„Canvasæ›´æ–°å‡½æ•°
        function updateInftyCanvas() {
            const canvas = document.getElementById('inftyCanvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const width = canvas.width = 400;
            const height = canvas.height = 300;
            ctx.clearRect(0, 0, width, height);
            
            // ç»˜åˆ¶åæ ‡è½´
            ctx.strokeStyle = '#374151';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(40, height - 40);
            ctx.lineTo(width - 40, height - 40);
            ctx.moveTo(40, 40);
            ctx.lineTo(40, height - 40);
            ctx.stroke();
            
            // ç»˜åˆ¶å‡½æ•°æ›²çº¿
            ctx.strokeStyle = '#2563eb';
            ctx.lineWidth = 2;
            ctx.beginPath();
            for (let x = 0; x <= 10; x += 0.1) {
                const y = 2 * x * x - 3 * x;
                const canvasX = 40 + (x / 10) * (width - 80);
                const canvasY = height - 40 - (y / 100) * (height - 80);
                if (x === 0) {
                    ctx.moveTo(canvasX, canvasY);
                } else {
                    ctx.lineTo(canvasX, canvasY);
                }
            }
            ctx.stroke();
            
            // æ·»åŠ æ ‡ç­¾
            ctx.fillStyle = '#1f2937';
            ctx.font = '14px Arial';
            ctx.fillText('f(x) = 2xÂ² - 3x', 50, 60);
        }

        function updateOtherCanvas() {
            const canvas = document.getElementById('otherCanvas');
            if (!canvas) return;
            const ctx = canvas.getContext('2d');
            const width = canvas.width = 400;
            const height = canvas.height = 300;
            ctx.clearRect(0, 0, width, height);
            
            // ç»˜åˆ¶åæ ‡è½´
            ctx.strokeStyle = '#374151';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(40, height - 40);
            ctx.lineTo(width - 40, height - 40);
            ctx.moveTo(40, 40);
            ctx.lineTo(40, height - 40);
            ctx.stroke();
            
            // ç»˜åˆ¶å‡½æ•°æ›²çº¿
            ctx.strokeStyle = '#f59e0b';
            ctx.lineWidth = 2;
            ctx.beginPath();
            for (let x = 0.1; x <= 3; x += 0.01) {
                const y = Math.pow(x, x);
                const canvasX = 40 + (x / 3) * (width - 80);
                const canvasY = height - 40 - (y / 3) * (height - 80);
                if (x === 0.1) {
                    ctx.moveTo(canvasX, canvasY);
                } else {
                    ctx.lineTo(canvasX, canvasY);
                }
            }
            ctx.stroke();
            
            // æ·»åŠ æ ‡ç­¾
            ctx.fillStyle = '#1f2937';
            ctx.font = '14px Arial';
            ctx.fillText('f(x) = x^x', 50, 60);
        }

        populateTypeTable();
        populateCaseSelector();
        buildFlowSteps();
        updateCaseSummary('zero');
        updateCanvas();
        initNavigation();
        const firstNavButton = document.querySelector('.nav-btn[data-section]');
        if (firstNavButton) {
            switchPage(firstNavButton.dataset.section);
        }
        renderMath();
    </script>
</body>
</html>













