<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœ€ä¼˜åŒ–å†³ç­–å®éªŒå®¤</title>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\(', '\)']],
                displayMath: [['$$', '$$'], ['\[', '\]']],
                processEscapes: true
            },
            startup: {
                pageReady: () => {
                    return MathJax.startup.defaultPageReady().then(() => {
                        console.log('MathJaxåŠ è½½å®Œæˆ');
                    });
                }
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
            }
        };
    </script>
    <script defer src="../common-assets/js/mathjax-3.2.2-tex-svg.min.js"></script>
    <style>
        :root {
            --primary: #4f46e5;
            --primary-dark: #3730a3;
            --primary-light: #6366f1;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --info: #0ea5e9;
            --gray-50: #f9fafb;
            --gray-100: #f3f4f6;
            --gray-200: #e5e7eb;
            --gray-300: #d1d5db;
            --gray-400: #9ca3af;
            --gray-500: #6b7280;
            --gray-600: #4b5563;
            --gray-700: #1f2937;
            --white: #ffffff;
            --border: #e5e7eb;
            --h1-size: 22px;
            --h3-size: 18px;
            --text-size: 16px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        *::-webkit-scrollbar {
            width: 0;
            background: transparent;
        }

        * {
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Microsoft YaHei", Arial, sans-serif;
            font-size: var(--text-size);
            line-height: 1.5;
            background: var(--gray-50);
            color: var(--gray-700);
        }

        .container {
            width: 100%;
            max-width: 1400px;
            height: min(100vh, 700px);
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            background: var(--white);
            border-radius: 12px;
            box-shadow: 0 12px 32px rgba(15, 23, 42, 0.08);
            overflow: hidden;
        }

        .header {
            height: 40px;
            background: var(--primary);
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
        }

        .header h1 {
            font-size: var(--h1-size);
            font-weight: 600;
        }

        .header span {
            font-size: 14px;
            opacity: 0.9;
        }

        .main {
            flex: 1;
            display: flex;
            overflow: hidden;
        }

        .sidebar {
            width: 120px;
            background: var(--gray-50);
            border-right: 1px solid var(--border);
            padding: 12px 10px;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .nav-btn {
            width: 100%;
            padding: 8px 10px;
            border: none;
            border-radius: 8px;
            background: transparent;
            color: var(--gray-600);
            text-align: left;
            cursor: pointer;
            transition: background 0.2s ease, color 0.2s ease;
        }

        .nav-btn:hover {
            background: var(--gray-100);
        }

        .nav-btn.active {
            background: var(--primary);
            color: var(--white);
            box-shadow: 0 8px 18px rgba(79, 70, 229, 0.28);
        }

        .content {
            flex: 1;
            background: var(--white);
        }

        .page-content {
            display: none;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 18px;
            padding: 16px;
            height: 100%;
        }

        .page-content.active {
            display: grid;
        }

        .column {
            display: flex;
            flex-direction: column;
            gap: 16px;
            overflow-y: auto;
            padding-right: 4px;
        }

        .card {
            background: var(--white);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 14px 16px;
            display: flex;
            flex-direction: column;
            gap: 12px;
            box-shadow: 0 8px 22px rgba(15, 23, 42, 0.06);
        }

        .card h3 {
            font-size: var(--h3-size);
            color: var(--primary-dark);
        }

        .card p {
            color: var(--gray-600);
        }

        .tag-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .tag {
            background: var(--gray-100);
            color: var(--gray-500);
            padding: 4px 10px;
            border-radius: 999px;
            font-size: 13px;
        }

        .controls {
            display: flex;
            flex-direction: column;
            gap: 12px;
            background: var(--gray-50);
            border: 1px dashed var(--gray-200);
            border-radius: 10px;
            padding: 12px;
        }

        .control-row {
            display: flex;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .control-row label {
            font-weight: 600;
            color: var(--gray-600);
        }

        select {
            flex: 1;
            padding: 8px 10px;
            border-radius: 8px;
            border: 1px solid var(--gray-300);
            font-size: 15px;
            color: var(--gray-700);
            background: var(--white);
        }

        input[type="range"],
        input[type="number"] {
            flex: 1;
        }

        input[type="number"] {
            max-width: 160px;
            padding: 6px 8px;
            border-radius: 8px;
            border: 1px solid var(--gray-300);
        }

        .action {
            padding: 8px 12px;
            border-radius: 8px;
            border: none;
            background: var(--primary);
            color: var(--white);
            cursor: pointer;
            font-size: 15px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        .action.secondary {
            background: var(--white);
            color: var(--primary);
            border: 1px solid var(--primary);
        }

        .action.ghost {
            background: var(--gray-100);
            color: var(--gray-600);
            border: 1px solid var(--gray-200);
        }

        .action:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .action:hover:not(:disabled) {
            transform: translateY(-1px);
            box-shadow: 0 10px 22px rgba(79, 70, 229, 0.18);
        }

        .status-box {
            border-radius: 10px;
            padding: 10px 12px;
            font-size: 14px;
            line-height: 1.5;
            background: #eef2ff;
            color: var(--primary-dark);
        }

        .status-box.warning {
            background: #fef3c7;
            color: #92400e;
            border: 1px solid rgba(217, 119, 6, 0.3);
        }

        .status-box.success {
            background: #ecfdf5;
            color: #047857;
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 10px;
        }

        .info-item {
            background: var(--gray-50);
            border: 1px solid var(--gray-200);
            border-radius: 10px;
            padding: 10px 12px;
            font-size: 14px;
            color: var(--gray-600);
        }

        .info-item strong {
            display: block;
            color: var(--primary-dark);
            margin-bottom: 4px;
        }

        .canvas-wrapper {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        canvas.lab-canvas {
            width: 100%;
            height: 240px;
            border-radius: 10px;
            background: var(--white);
            border: 1px solid var(--gray-200);
        }

        .legend {
            display: flex;
            gap: 16px;
            flex-wrap: wrap;
            font-size: 14px;
            color: var(--gray-500);
        }

        .legend span {
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .legend i {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 2px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 15px;
        }

        th,
        td {
            border: 1px solid var(--gray-200);
            padding: 8px;
            text-align: center;
        }

        thead {
            background: var(--gray-100);
        }

        tbody tr.highlight {
            background: #eef2ff;
        }

        .practice-list {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 8px;
        }

        .practice-item {
            border: 1px dashed var(--gray-200);
            border-radius: 8px;
            padding: 8px 10px;
            font-size: 14px;
            background: var(--gray-50);
            color: var(--gray-600);
        }

        .hint-list {
            display: flex;
            flex-direction: column;
            gap: 6px;
            font-size: 14px;
            color: var(--gray-600);
        }

        .flow-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .flow-step {
            border: 1px solid var(--gray-200);
            border-radius: 10px;
            padding: 10px 12px;
            background: var(--gray-50);
            transition: background 0.2s ease, border 0.2s ease;
        }

        .flow-step h4 {
            font-size: 15px;
            color: var(--primary-dark);
            margin-bottom: 4px;
        }

        .flow-step p {
            font-size: 14px;
            color: var(--gray-600);
        }

        .flow-step.active {
            background: #eef2ff;
            border-color: var(--primary);
        }

        .solver-grid {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 10px;
        }

        .solver-card {
            background: var(--gray-50);
            border: 1px solid var(--gray-200);
            border-radius: 10px;
            padding: 10px 12px;
            display: flex;
            flex-direction: column;
            gap: 6px;
            font-size: 14px;
            color: var(--gray-600);
        }

        .solver-card strong {
            color: var(--primary-dark);
        }

        .result-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 14px;
            padding: 4px 10px;
            border-radius: 999px;
            background: #dbeafe;
            color: #1d4ed8;
        }

        .case-list {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 12px;
        }

        .case-card {
            border: 1px solid var(--gray-200);
            border-radius: 10px;
            padding: 12px;
            background: var(--gray-50);
            display: flex;
            flex-direction: column;
            gap: 6px;
        }

        .case-card h4 {
            font-size: 16px;
            color: var(--primary-dark);
        }

        .case-card p {
            font-size: 14px;
            color: var(--gray-600);
        }

        @media (max-width: 1024px) {
            .page-content {
                grid-template-columns: 1fr;
            }

            .case-list,
            .practice-list,
            .solver-grid,
            .info-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>æœ€ä¼˜åŒ–å†³ç­–å®éªŒå®¤</h1>
            <span>åˆ©ç”¨å¯¼æ•°æ„å»ºæ¨¡å‹ã€æ±‚è§£æœ€ä¼˜æ–¹æ¡ˆ</span>
        </header>
        <div class="main">
            <nav class="sidebar">
                <button class="nav-btn active" data-target="section-model">å»ºç«‹æ¨¡å‹</button>
                <button class="nav-btn" data-target="section-solve">åŠ¨æ‰‹æ±‚è§£</button>
                <button class="nav-btn" data-target="section-cases">åº”ç”¨æ¡ˆä¾‹åº“</button>
            </nav>
            <section class="content">
                <div class="page-content active" id="section-model">
                    <div class="column">
                        <div class="card">
                            <h3>å®éªŒå¯¼å¼•</h3>
                            <p>æœ€ä¼˜åŒ–é—®é¢˜çš„æ ¸å¿ƒæ˜¯æ‰¾åˆ°ä½¿ç›®æ ‡å‡½æ•°è¾¾åˆ°æœ€å¤§æˆ–æœ€å°çš„å†³ç­–å˜é‡å€¼ã€‚æœ¬å®éªŒé€šè¿‡çœŸå®ä¸šåŠ¡åœºæ™¯ï¼Œå±•ç¤ºå¦‚ä½•å»ºç«‹æ¨¡å‹ã€åˆ†æå¯¼æ•°å¹¶åšå‡ºæœ€ä¼˜å†³ç­–ã€‚</p>
                            <div class="tag-list">
                                <span class="tag">ç›®æ ‡å‡½æ•°</span>
                                <span class="tag">ä¸€é˜¶å¯¼æ•°</span>
                                <span class="tag">äºŒé˜¶åˆ¤åˆ«</span>
                                <span class="tag">å›¾åƒç†è§£</span>
                            </div>
                            <div class="status-box" id="scenario-status">ä»å·¦ä¾§é€‰æ‹©ä¸€ä¸ªæ¡ˆä¾‹ï¼Œç³»ç»Ÿä¼šç”Ÿæˆå¯¹åº”çš„å‡½æ•°å›¾åƒä¸å…³é”®æ•°æ®ã€‚</div>
                        </div>
                        <div class="card">
                            <h3>å‚æ•°é€‰æ‹©ä¸åŠ¨æ€è§‚å¯Ÿ</h3>
                            <div class="controls">
                                <div class="control-row">
                                    <label for="scenario-select">åº”ç”¨åœºæ™¯ï¼š</label>
                                    <select id="scenario-select"></select>
                                </div>
                                <div class="control-row">
                                    <label>å†³ç­–å˜é‡ $x$ï¼š</label>
                                    <span class="result-badge">å½“å‰å€¼ï¼š<span id="slider-value">0.00</span></span>
                                </div>
                                <input type="range" id="model-slider" min="0" max="10" step="0.1" value="0">
                                <div class="control-row">
                                    <button class="action" id="play-flow">æŒ‰æµç¨‹æ¼”ç¤º</button>
                                    <button class="action secondary" id="reset-model">æ¢å¤é»˜è®¤</button>
                                </div>
                            </div>
                            <div class="hint-list">
                                <span>â€¢ æ‹–åŠ¨æ»‘å—æ¨¡æ‹Ÿä¸åŒå†³ç­–ï¼Œåˆ©æ¶¦/æˆæœ¬éšå³æ›´æ–°ã€‚</span>
                                <span>â€¢ ç‚¹å‡»â€œæŒ‰æµç¨‹æ¼”ç¤ºâ€è§‚çœ‹ä»æ¨¡å‹å»ºç«‹åˆ°æœ€ä¼˜éªŒè¯çš„å…³é”®æ­¥éª¤ã€‚</span>
                                <span>â€¢ è¡¨æ ¼è‡ªåŠ¨åˆ—å‡ºå…¸å‹å–å€¼ï¼Œæ–¹ä¾¿æ¯”è¾ƒæ”¶ç›Šæˆ–æˆæœ¬ã€‚</span>
                            </div>
                        </div>
                        <div class="card">
                            <h3>å»ºæ¨¡æµç¨‹è®°å½•</h3>
                            <div class="flow-container" id="model-flow"></div>
                        </div>
                    </div>
                    <div class="column">
                        <div class="card">
                            <h3>å‡½æ•°ä¸å¯¼æ•°å›¾åƒ</h3>
                            <div class="canvas-wrapper">
                                <canvas class="lab-canvas" id="function-canvas" width="520" height="240"></canvas>
                                <canvas class="lab-canvas" id="derivative-canvas" width="520" height="220"></canvas>
                            </div>
                            <div class="legend">
                                <span><i style="background:#4f46e5"></i> ç›®æ ‡å‡½æ•° $f(x)$</span>
                                <span><i style="background:#fb923c"></i> å¯¼æ•° $f'(x)$</span>
                                <span><i style="background:#22c55e"></i> å…³é”®ç‚¹/æœ€ä¼˜å€¼</span>
                            </div>
                        </div>
                        <div class="card">
                            <h3>å…³é”®æ•°å€¼è¡¨</h3>
                            <table>
                                <thead>
                                    <tr>
                                        <th>$x$</th>
                                        <th>$f(x)$</th>
                                        <th>$f'(x)$</th>
                                        <th>æ–œç‡åˆ¤æ–­</th>
                                    </tr>
                                </thead>
                                <tbody id="value-table"></tbody>
                            </table>
                            <div class="status-box" id="value-status">æŸ¥çœ‹å¯¼æ•°ç¬¦å·çš„å˜åŒ–ï¼Œåˆ¤æ–­æœ€ä¼˜è§£é™„è¿‘çš„å•è°ƒæ€§ã€‚</div>
                        </div>
                        <div class="card">
                            <h3>è¯¾å ‚ç»ƒä¹ </h3>
                            <div class="practice-list" id="practice-list"></div>
                        </div>
                    </div>
                </div>

                <div class="page-content" id="section-solve">
                    <div class="column">
                        <div class="card">
                            <h3>æ±‚è§£ç­–ç•¥</h3>
                            <p id="solve-description">è¯·é€‰æ‹©æ¡ˆä¾‹åæŸ¥çœ‹å¯¹åº”çš„æœ€ä¼˜åŒ–æ–¹ç¨‹ä¸åˆ¤åˆ«æ–¹æ³•ã€‚</p>
                            <div class="status-box" id="solve-summary">ä¸€é˜¶å¯¼æ•°ç­‰äºé›¶å®šä½å€™é€‰ç‚¹ï¼Œå†åˆ©ç”¨äºŒé˜¶å¯¼æ•°æˆ–å•è°ƒåŒºé—´ç¡®è®¤æœ€ä¼˜æ€§ã€‚</div>
                        </div>
                        <div class="card">
                            <h3>ä¸€é˜¶/äºŒé˜¶åˆ¤åˆ«</h3>
                            <div class="solver-grid">
                                <div class="solver-card">
                                    <strong>ä¸€é˜¶å¯¼æ•°æ–¹ç¨‹</strong>
                                    <span id="solve-first">$f'(x)=0$</span>
                                </div>
                                <div class="solver-card">
                                    <strong>äºŒé˜¶å¯¼æ•°</strong>
                                    <span id="solve-second">$f''(x)$</span>
                                </div>
                                <div class="solver-card">
                                    <strong>å•è°ƒæ€§åˆ†æ</strong>
                                    <span id="solve-intervals">---</span>
                                </div>
                                <div class="solver-card">
                                    <strong>æœ€ä¼˜å€¼ç»“è®º</strong>
                                    <span id="solve-conclusion">---</span>
                                </div>
                            </div>
                        </div>
                        <div class="card">
                            <h3>è‡ªå·±ç®—ä¸€ç®—</h3>
                            <div class="controls">
                                <div class="control-row">
                                    <label for="answer-input">çŒœæµ‹æœ€ä¼˜ $x$ï¼š</label>
                                    <input type="number" id="answer-input" step="0.01" placeholder="è¯·è¾“å…¥">
                                </div>
                                <div class="control-row">
                                    <button class="action" id="check-answer">éªŒè¯ç­”æ¡ˆ</button>
                                    <button class="action ghost" id="show-answer">æ˜¾ç¤ºå‚è€ƒ</button>
                                </div>
                            </div>
                            <div class="status-box" id="answer-status">è¯•ç€æ ¹æ®å¯¼æ•°ç¬¦å·åˆ¤æ–­æœ€ä¼˜ç‚¹ï¼Œå†è¾“å…¥ä½ çš„ç­”æ¡ˆã€‚</div>
                        </div>
                    </div>
                    <div class="column">
                        <div class="card">
                            <h3>æ¨å¯¼æµç¨‹å¤ç›˜</h3>
                            <div class="flow-container" id="solve-flow"></div>
                        </div>
                        <div class="card">
                            <h3>å•†ä¸šè§£è¯»</h3>
                            <div class="info-grid" id="business-highlights"></div>
                        </div>
                    </div>
                </div>

                <div class="page-content" id="section-cases">
                    <div class="column">
                        <div class="card">
                            <h3>æ¡ˆä¾‹æ¦‚è§ˆ</h3>
                            <p>è¿™äº›æ¡ˆä¾‹è¦†ç›–åˆ©æ¶¦æœ€å¤§åŒ–ã€æˆæœ¬æœ€å°åŒ–ä¸èµ„æºæŠ•æ”¾è§„åˆ’ç­‰å…¸å‹é—®é¢˜ã€‚æ¯”è¾ƒä¸åŒæ¨¡å‹å¦‚ä½•åˆ©ç”¨å¯¼æ•°å¾—åˆ°æœ€ä¼˜ç­–ç•¥ã€‚</p>
                            <div class="status-box success">å–„ç”¨å¯¼æ•°ç¬¦å·ä¸äºŒé˜¶ä¿¡æ¯ï¼Œå¯ä»¥æ›´å¿«ç¡®è®¤æœ€ä¼˜è§£æ˜¯å¦åˆç†ã€‚</div>
                        </div>
                        <div class="card">
                            <h3>æ¡ˆä¾‹å­¦ä¹ è·¯å¾„</h3>
                            <div class="flow-container" id="case-flow"></div>
                        </div>
                    </div>
                    <div class="column">
                        <div class="card">
                            <h3>æ¡ˆä¾‹è¯¦æƒ…</h3>
                            <div class="case-list" id="case-list"></div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <script>
        const scenarios = [
            {
                id: 'factory',
                name: 'å·¥å‚äº§é‡è§„åˆ’',
                type: 'max',
                units: 'ä¸‡å…ƒ',
                variableLabel: 'äº§é‡ xï¼ˆç™¾ä»¶ï¼‰',
                description: 'å›ºå®šæˆæœ¬ 32 ä¸‡å…ƒï¼Œæ¯ç™¾ä»¶äº§å“è´¡çŒ® 24 ä¸‡å…ƒæ”¶å…¥ï¼Œè¾¹é™…æˆæœ¬éšäº§é‡å¢åŠ ã€‚',
                formula: '$P(x) = -2x^2 + 24x - 32$',
                derivativeLatex: "$P'(x) = -4x + 24$",
                secondLatex: "$P''(x) = -4 < 0$",
                func: x => -2 * x * x + 24 * x - 32,
                derivative: x => -4 * x + 24,
                secondDerivative: () => -4,
                slider: { min: 0, max: 12, step: 0.1, start: 6 },
                domain: [0, 12],
                optimum: 6,
                optimumLabel: 'æœ€å¤§åˆ©æ¶¦',
                practices: [
                    '$\displaystyle \max P(x) = -2x^2 + 24x - 32$',
                    'è‹¥åŸæ–™ä»·æ ¼ä¸Šæ¶¨ä½¿å¸¸æ•°é¡¹å˜ä¸º $-36$ï¼Œæœ€ä¼˜ $x$ æ˜¯å¦æ”¹å˜ï¼Ÿ',
                    'åˆ©ç”¨äºŒé˜¶å¯¼æ•°è§£é‡Šä¸ºä»€ä¹ˆ $x=6$ æ˜¯æå¤§å€¼ã€‚'
                ],
                samples: [0, 2, 4, 6, 8, 10, 12],
                flow: [
                    { title: 'å»ºç«‹å‡½æ•°', detail: 'å°†åˆ©æ¶¦å†™æˆ $P(x) = æ”¶å…¥ - æˆæœ¬$ çš„å½¢å¼ã€‚' },
                    { title: 'æ±‚ä¸€é˜¶å¯¼æ•°', detail: 'å¯¹ $P(x)$ æ±‚å¯¼å¾—åˆ°è¾¹é™…åˆ©æ¶¦ $P'(x)$ã€‚' },
                    { title: 'ä»¤å¯¼æ•°ä¸ºé›¶', detail: 'è§£æ–¹ç¨‹ $P'(x)=0$ å¾—åˆ°å€™é€‰è§£ã€‚' },
                    { title: 'äºŒé˜¶å¯¼æ•°åˆ¤åˆ«', detail: '$P''(x)=-4<0$ï¼Œè¯´æ˜å‡ºç°æå¤§å€¼ã€‚', status: 'success' }
                ],
                solution: {
                    goal: 'æœ€å¤§åŒ–åˆ©æ¶¦ $P(x)$ï¼Œæ‰¾å‡ºæœ€ä½³äº§é‡ã€‚',
                    first: '$P'(x) = -4x + 24 = 0 \Rightarrow x = 6$',
                    second: '$P''(x) = -4 < 0$ï¼Œæ•…ä¸ºæå¤§å€¼ã€‚',
                    intervals: '$P'(x) > 0$ å½“ $x<6$ï¼Œ$P'(x) < 0$ å½“ $x>6$ã€‚',
                    conclusion: 'å½“ $x=6$ï¼ˆç”Ÿäº§ 600 ä»¶ï¼‰æ—¶åˆ©æ¶¦çº¦ä¸º $40$ ä¸‡å…ƒï¼Œè¾¾åˆ°æœ€å¤§ã€‚',
                    highlights: [
                        { title: 'è¾¹é™…åˆ©æ¶¦å«ä¹‰', content: 'ç”Ÿäº§æ¯å¢åŠ  100 ä»¶çš„é¢å¤–æ”¶ç›Šä¼šé€æ¸ä¸‹é™ï¼Œå¯¼æ•°ä¸ºé›¶æ„å‘³ç€å¢åŠ å’Œå‡å°‘éƒ½ä¼šé™ä½åˆ©æ¶¦ã€‚' },
                        { title: 'ç”Ÿäº§çº¦æŸ', content: 'è‹¥äº§çº¿æœ€å¤§äº§èƒ½ä¸º 8ï¼ˆ800 ä»¶ï¼‰ï¼Œæœ€ä¼˜ç‚¹ä»åœ¨èƒ½åŠ›èŒƒå›´å†…ï¼Œå¯ç›´æ¥æ‰§è¡Œã€‚' }
                    ]
                }
            },
            {
                id: 'marketing',
                name: 'å¹¿å‘ŠæŠ•æ”¾å›æŠ¥',
                type: 'max',
                units: 'ä¸‡å…ƒ',
                variableLabel: 'æŠ•æ”¾å¤©æ•° x',
                description: 'å¹¿å‘ŠæŠ•æ”¾æ”¶ç›Šå‘ˆæŒ‡æ•°é€’å‡ï¼Œé¢å¤–æŠ•æ”¾ä¼šå¸¦æ¥æˆæœ¬ã€‚ç›®æ ‡æ˜¯æ‰¾åˆ°æœ€ä½³æŠ•æ”¾å¤©æ•°ã€‚',
                formula: '$R(x) = 120(1 - e^{-0.3x}) - 15x$',
                derivativeLatex: "$R'(x) = 36e^{-0.3x} - 15$",
                secondLatex: "$R''(x) = -10.8 e^{-0.3x} < 0$",
                func: x => 120 * (1 - Math.exp(-0.3 * x)) - 15 * x,
                derivative: x => 36 * Math.exp(-0.3 * x) - 15,
                secondDerivative: x => -10.8 * Math.exp(-0.3 * x),
                slider: { min: 0, max: 15, step: 0.1, start: 3 },
                domain: [0, 15],
                optimum: 2.92,
                optimumLabel: 'æœ€å¤§å›æŠ¥',
                practices: [
                    'å°è¯•æ¨å¯¼ $R'(x) = 0$ çš„è§£æè§£ã€‚',
                    'è‹¥æ¯æ—¥æŠ•æ”¾æˆæœ¬ä¸Šå‡åˆ° 18 ä¸‡ï¼Œåº”å¦‚ä½•è°ƒæ•´æ¨¡å‹ï¼Ÿ',
                    'è¯´æ˜æŒ‡æ•°è¡°å‡ä¸ºä½•å¯¼è‡´äºŒé˜¶å¯¼æ•°å§‹ç»ˆå°äº 0ã€‚'
                ],
                samples: [0, 1.5, 3, 4.5, 6, 9, 12],
                flow: [
                    { title: 'ç¡®å®šç›®æ ‡', detail: 'æœ€å¤§åŒ–å‡€æ”¶ç›Š $R(x)$ï¼Œå•ä½ä¸ºä¸‡å…ƒã€‚' },
                    { title: 'æ±‚è¾¹é™…æ”¶ç›Š', detail: 'æ±‚å¯¼å¾—åˆ° $R'(x)=36e^{-0.3x}-15$ã€‚' },
                    { title: 'è§£æ–¹ç¨‹', detail: 'è§£ $R'(x)=0$ï¼Œå¾—åˆ° $x \approx 2.92$ã€‚' },
                    { title: 'éªŒè¯åˆç†æ€§', detail: 'äºŒé˜¶å¯¼æ•°ä¸ºè´Ÿï¼Œä¸”è¶…è¿‡ 3 å¤©åæ”¶ç›Šä¸‹é™ã€‚', status: 'info' }
                ],
                solution: {
                    goal: 'åœ¨æŠ•æ”¾é¢„ç®—å†…è·å¾—æœ€å¤§å›æŠ¥ã€‚',
                    first: '$R'(x) = 36e^{-0.3x} - 15 = 0 \Rightarrow x \approx 2.92$',
                    second: '$R''(x) = -10.8 e^{-0.3x} < 0$ï¼Œè¯´æ˜è¯¥ç‚¹ä¸ºæå¤§å€¼ã€‚',
                    intervals: 'å½“ $x<2.92$ æ—¶ $R'(x) > 0$ï¼›å½“ $x>2.92$ æ—¶ $R'(x) < 0$ã€‚',
                    conclusion: 'æŠ•æ”¾çº¦ 3 å¤©å¯ä»¥è·å¾—æœ€å¤§å‡€æ”¶ç›Šï¼Œæ”¶ç›Šçº¦ä¸º $R(2.92) \approx 58.2$ ä¸‡å…ƒã€‚',
                    highlights: [
                        { title: 'è¾¹é™…æ•ˆç”¨é€’å‡', content: 'æŠ•æ”¾è¶Šä¹…è¾¹é™…æ”¶ç›Šè¶Šä½ï¼Œè¿‡åº¦æŠ•æ”¾ä¼šå¯¼è‡´æˆæœ¬è¶…è¿‡æ–°å¢æ”¶ç›Šã€‚' },
                        { title: 'åŠ¨æ€è°ƒæ•´', content: 'è‹¥å¸‚åœºåé¦ˆè‰¯å¥½å¯å»¶é•¿æŠ•æ”¾ï¼Œä½†éœ€å®æ—¶ç›‘æ§å¯¼æ•°çš„æ­£è´Ÿå˜åŒ–ã€‚' }
                    ]
                }
            },
            {
                id: 'logistics',
                name: 'ç‰©æµé…é€æˆæœ¬',
                type: 'min',
                units: 'ä¸‡å…ƒ',
                variableLabel: 'é…é€æ‰¹æ¬¡ x',
                description: 'æ‰¹æ¬¡è¶Šå¤šå•æ¬¡è¿è¾“æˆæœ¬ä¸‹é™ï¼Œä½†æ€»è°ƒåº¦æˆæœ¬ä¸Šå‡ï¼›éœ€è¦æ‰¾åˆ°æˆæœ¬æœ€ä½çš„æ‰¹æ¬¡æ•°ã€‚',
                formula: '$C(x) = 0.3x^2 + \dfrac{120}{x} + 20$',
                derivativeLatex: "$C'(x) = 0.6x - \dfrac{120}{x^2}$",
                secondLatex: "$C''(x) = 0.6 + \dfrac{240}{x^3} > 0$",
                func: x => 0.3 * x * x + 120 / x + 20,
                derivative: x => 0.6 * x - 120 / (x * x),
                secondDerivative: x => 0.6 + 240 / (x * x * x),
                slider: { min: 2, max: 12, step: 0.1, start: 5.8 },
                domain: [2, 12],
                optimum: Math.cbrt(200),
                optimumLabel: 'æœ€å°æˆæœ¬',
                practices: [
                    'éªŒè¯ $C'(x) = 0$ è§£çš„ç«‹æ–¹æ ¹å½¢å¼ã€‚',
                    'å°è¯•ç”¨å•è°ƒæ€§è€ŒéäºŒé˜¶å¯¼æ•°æ¥åˆ¤æ–­æœ€ä¼˜æ€§ã€‚',
                    'è‹¥æ¯æ‰¹å›ºå®šæˆæœ¬ä¸‹é™ï¼Œæœ€ä¼˜æ‰¹æ¬¡æ•°å¦‚ä½•å˜åŒ–ï¼Ÿ'
                ],
                samples: [2, 3.5, 5, 6, 7.5, 9, 11],
                flow: [
                    { title: 'æ„å»ºæˆæœ¬æ¨¡å‹', detail: 'å°†æ‰¹æ¬¡æ•°ä¸è¿è¾“ã€è°ƒåº¦æˆæœ¬ç»¼åˆæˆ $C(x)$ã€‚' },
                    { title: 'æ±‚å¯¼æ•°', detail: 'å¾—åˆ°è¾¹é™…æˆæœ¬ $C'(x) = 0.6x - 120/x^2$ã€‚' },
                    { title: 'æ±‚ä¸´ç•Œç‚¹', detail: 'è§£ $C'(x) = 0$ï¼Œå¾—åˆ° $x = \sqrt[3]{200} \approx 5.85$ã€‚' },
                    { title: 'åˆ¤æ–­æå°å€¼', detail: 'äºŒé˜¶å¯¼æ•° $>0$ï¼Œè¯¥ç‚¹ä¸ºæå°å€¼ï¼Œæˆæœ¬æœ€ä½ã€‚', status: 'success' }
                ],
                solution: {
                    goal: 'åœ¨æ»¡è¶³éœ€æ±‚çš„åŒæ—¶ä½¿é…é€æ€»æˆæœ¬æœ€ä½ã€‚',
                    first: '$C'(x) = 0.6x - \dfrac{120}{x^2} = 0 \Rightarrow x = \sqrt[3]{200} \approx 5.85$',
                    second: '$C''(x) = 0.6 + \dfrac{240}{x^3} > 0$ï¼Œå› æ­¤å¾—åˆ°æå°å€¼ã€‚',
                    intervals: 'å½“ $x<5.85$ æ—¶ $C'(x) < 0$ï¼›å½“ $x>5.85$ æ—¶ $C'(x) > 0$ã€‚',
                    conclusion: 'å®‰æ’çº¦ 6 ä¸ªæ‰¹æ¬¡è¿è¾“ï¼Œå¯å°†æ€»æˆæœ¬æ§åˆ¶åœ¨ $C(5.85) \approx 88.7$ ä¸‡å…ƒã€‚',
                    highlights: [
                        { title: 'çµæ´»è°ƒåº¦', content: 'æ‰¹æ¬¡è¿‡å°‘å¯¼è‡´å•æ¬¡è¿è¾“é‡è¿‡å¤§ã€æˆæœ¬ä¸Šå‡ï¼›è¿‡å¤šåˆ™è°ƒåº¦æˆæœ¬æ˜¾è‘—å¢åŠ ã€‚' },
                        { title: 'æ•æ„Ÿæ€§åˆ†æ', content: 'è‹¥æ²¹ä»·ä¸Šæ¶¨ï¼Œå¯åœ¨æ¨¡å‹ä¸­å¢åŠ å˜é‡åå†æ¬¡æ±‚å¯¼ï¼Œå¿«é€Ÿå¾—åˆ°æ–°çš„æœ€ä¼˜æ‰¹æ¬¡æ•°ã€‚' }
                    ]
                }
            }
        ];

        const navButtons = document.querySelectorAll('.nav-btn');
        const pages = document.querySelectorAll('.page-content');
        const scenarioSelect = document.getElementById('scenario-select');
        const slider = document.getElementById('model-slider');
        const sliderValue = document.getElementById('slider-value');
        const scenarioStatus = document.getElementById('scenario-status');
        const modelFlow = document.getElementById('model-flow');
        const valueTable = document.getElementById('value-table');
        const valueStatus = document.getElementById('value-status');
        const practiceList = document.getElementById('practice-list');
        const functionCanvas = document.getElementById('function-canvas');
        const derivativeCanvas = document.getElementById('derivative-canvas');
        const playFlowBtn = document.getElementById('play-flow');
        const resetBtn = document.getElementById('reset-model');
        const solveDescription = document.getElementById('solve-description');
        const solveSummary = document.getElementById('solve-summary');
        const solveFirst = document.getElementById('solve-first');
        const solveSecond = document.getElementById('solve-second');
        const solveIntervals = document.getElementById('solve-intervals');
        const solveConclusion = document.getElementById('solve-conclusion');
        const solveFlow = document.getElementById('solve-flow');
        const businessHighlights = document.getElementById('business-highlights');
        const answerInput = document.getElementById('answer-input');
        const checkAnswerBtn = document.getElementById('check-answer');
        const showAnswerBtn = document.getElementById('show-answer');
        const answerStatus = document.getElementById('answer-status');
        const caseFlow = document.getElementById('case-flow');
        const caseList = document.getElementById('case-list');

        let currentScenario = scenarios[0];
        let playTimer = null;

        function formatNumber(value) {
            if (!Number.isFinite(value)) return 'â€”';
            const abs = Math.abs(value);
            if (abs >= 1000) {
                return value.toFixed(0);
            }
            return value.toFixed(2);
        }

        function typeset() {
            if (window.MathJax && window.MathJax.typesetPromise) {
                window.MathJax.typesetPromise();
            }
        }

        function populateScenarioOptions() {
            scenarioSelect.innerHTML = scenarios.map(item => `<option value="${item.id}">${item.name}</option>`).join('');
        }

        function setSliderRange(config) {
            slider.min = config.min;
            slider.max = config.max;
            slider.step = config.step;
            slider.value = config.start;
        }

        function evaluateScenario(x) {
            const value = currentScenario.func(x);
            const derivative = currentScenario.derivative(x);
            const secondDerivative = currentScenario.secondDerivative(x);
            return { value, derivative, secondDerivative };
        }

        function buildFlow(container, steps) {
            container.innerHTML = '';
            steps.forEach((step, index) => {
                const element = document.createElement('div');
                element.className = 'flow-step';
                element.dataset.index = index;
                if (step.status === 'success') {
                    element.classList.add('success');
                }
                element.innerHTML = `
                    <h4>${step.title}</h4>
                    <p>${step.detail}</p>
                `;
                container.appendChild(element);
            });
        }

        function updatePractice(items) {
            practiceList.innerHTML = items.map(text => `<div class="practice-item">${text}</div>`).join('');
        }

        function updateValueTable() {
            const rows = currentScenario.samples.map(x => {
                const { value, derivative } = evaluateScenario(x);
                const sign = derivative > 0 ? 'ä¸Šå‡' : derivative < 0 ? 'ä¸‹é™' : 'ä¸´ç•Œ';
                const trendIcon = derivative > 0 ? 'ğŸ“ˆ' : derivative < 0 ? 'ğŸ“‰' : 'âš–ï¸';
                return `
                    <tr data-x="${x}">
                        <td>${formatNumber(x)}</td>
                        <td>${formatNumber(value)}</td>
                        <td>${formatNumber(derivative)}</td>
                        <td>${trendIcon} ${sign}</td>
                    </tr>
                `;
            }).join('');
            valueTable.innerHTML = rows;
        }

        function highlightClosestRow(x) {
            const rows = valueTable.querySelectorAll('tr');
            let closestRow = null;
            let minDiff = Infinity;
            rows.forEach(row => {
                const rowX = parseFloat(row.dataset.x);
                const diff = Math.abs(rowX - x);
                if (diff < minDiff) {
                    minDiff = diff;
                    closestRow = row;
                }
            });
            rows.forEach(row => row.classList.remove('highlight'));
            if (closestRow) {
                closestRow.classList.add('highlight');
            }
        }

        function drawAxes(ctx, domain, range, padding) {
            const { width, height } = ctx.canvas;
            ctx.clearRect(0, 0, width, height);
            ctx.fillStyle = '#ffffff';
            ctx.fillRect(0, 0, width, height);

            ctx.strokeStyle = '#d1d5db';
            ctx.lineWidth = 1;
            ctx.beginPath();
            ctx.rect(padding, padding, width - 2 * padding, height - 2 * padding);
            ctx.stroke();

            const zeroY = range.max === range.min ? 0 : (0 - range.min) / (range.max - range.min);
            if (zeroY >= 0 && zeroY <= 1) {
                const y = padding + (1 - zeroY) * (height - 2 * padding);
                ctx.strokeStyle = '#e5e7eb';
                ctx.beginPath();
                ctx.moveTo(padding, y);
                ctx.lineTo(width - padding, y);
                ctx.stroke();
            }

            const zeroX = domain.max === domain.min ? 0 : (0 - domain.min) / (domain.max - domain.min);
            if (zeroX >= 0 && zeroX <= 1) {
                const x = padding + zeroX * (width - 2 * padding);
                ctx.strokeStyle = '#e5e7eb';
                ctx.beginPath();
                ctx.moveTo(x, padding);
                ctx.lineTo(x, height - padding);
                ctx.stroke();
            }
        }

        function getRange(fn, domain) {
            let min = Infinity;
            let max = -Infinity;
            for (let i = 0; i <= 200; i++) {
                const t = i / 200;
                const x = domain.min + t * (domain.max - domain.min);
                const value = fn(x);
                if (Number.isFinite(value)) {
                    min = Math.min(min, value);
                    max = Math.max(max, value);
                }
            }
            if (min === Infinity || max === -Infinity) {
                min = -1;
                max = 1;
            }
            if (Math.abs(max - min) < 1e-3) {
                max += 1;
                min -= 1;
            }
            const padding = (max - min) * 0.1;
            return { min: min - padding, max: max + padding };
        }

        function drawCurve(ctx, fn, domain, range, color) {
            const { width, height } = ctx.canvas;
            const padding = 40;
            drawAxes(ctx, domain, range, padding);

            ctx.strokeStyle = color;
            ctx.lineWidth = 2;
            ctx.beginPath();
            let started = false;
            for (let i = 0; i <= 200; i++) {
                const t = i / 200;
                const x = domain.min + t * (domain.max - domain.min);
                const y = fn(x);
                if (!Number.isFinite(y)) {
                    started = false;
                    continue;
                }
                const px = padding + t * (width - 2 * padding);
                const py = padding + (1 - (y - range.min) / (range.max - range.min)) * (height - 2 * padding);
                if (!started) {
                    ctx.moveTo(px, py);
                    started = true;
                } else {
                    ctx.lineTo(px, py);
                }
            }
            ctx.stroke();

            return padding;
        }

        function drawMarker(ctx, x, y, domain, range, color, padding) {
            const { width, height } = ctx.canvas;
            const px = padding + (x - domain.min) / (domain.max - domain.min) * (width - 2 * padding);
            const py = padding + (1 - (y - range.min) / (range.max - range.min)) * (height - 2 * padding);
            ctx.fillStyle = color;
            ctx.beginPath();
            ctx.arc(px, py, 5, 0, Math.PI * 2);
            ctx.fill();
        }

        function updateCanvases() {
            const domain = { min: currentScenario.slider.min, max: currentScenario.slider.max };
            const valueRange = getRange(currentScenario.func, domain);
            const derivativeRange = getRange(currentScenario.derivative, domain);

            const valuePadding = drawCurve(functionCanvas.getContext('2d'), currentScenario.func, domain, valueRange, '#4f46e5');
            const derivativePadding = drawCurve(derivativeCanvas.getContext('2d'), currentScenario.derivative, domain, derivativeRange, '#fb923c');

            const optimumX = currentScenario.optimum;
            if (optimumX >= domain.min && optimumX <= domain.max) {
                const { value } = evaluateScenario(optimumX);
                drawMarker(functionCanvas.getContext('2d'), optimumX, value, domain, valueRange, '#22c55e', valuePadding);
                const derivativeValue = currentScenario.derivative(optimumX);
                drawMarker(derivativeCanvas.getContext('2d'), optimumX, derivativeValue, domain, derivativeRange, '#22c55e', derivativePadding);
            }
        }

        function updateScenarioStatus(x) {
            const { value, derivative } = evaluateScenario(x);
            const trend = derivative > 0 ? 'æ”¶ç›Šæ­£åœ¨ä¸Šå‡' : derivative < 0 ? 'æ”¶ç›Šæ­£åœ¨ä¸‹é™' : 'è¾¾åˆ°æå€¼ç‚¹';
            const unitText = currentScenario.units ? currentScenario.units : '';
            scenarioStatus.innerHTML = `å½“ $x=${formatNumber(x)}$ æ—¶ï¼Œç›®æ ‡å‡½æ•° $f(x)=${formatNumber(value)}${unitText}$ï¼Œå¯¼æ•° $f'(x)=${formatNumber(derivative)}$ï¼Œ${trend}ã€‚`;
            valueStatus.innerHTML = `${currentScenario.optimumLabel} ä½äºå¯¼æ•°ä» ${currentScenario.type === 'max' ? 'æ­£å˜è´Ÿ' : 'è´Ÿå˜æ­£'} çš„ä½ç½®ï¼Œè§‚å¯Ÿè¡¨æ ¼å¯ä»¥éªŒè¯è¿™ä¸€å˜åŒ–ã€‚`;
            typeset();
        }

        function updateSolveSection() {
            const info = currentScenario.solution;
            solveDescription.innerHTML = info.goal;
            solveSummary.innerHTML = currentScenario.type === 'max'
                ? 'å¯¼æ•°ä»æ­£å˜è´Ÿè¯´æ˜è¾¾åˆ°æœ€å¤§å€¼ï¼›è‹¥å¯¼æ•°å§‹ç»ˆä¸ºè´Ÿåˆ™ä¸å­˜åœ¨å†…éƒ¨æœ€ä¼˜ç‚¹ã€‚'
                : 'å¯¼æ•°ä»è´Ÿå˜æ­£è¯´æ˜è¾¾åˆ°æœ€å°å€¼ï¼›è‹¥å¯¼æ•°å§‹ç»ˆä¸ºæ­£åˆ™æœ€å°å€¼å¯èƒ½å‡ºç°åœ¨è¾¹ç•Œã€‚';
            solveFirst.innerHTML = info.first;
            solveSecond.innerHTML = info.second;
            solveIntervals.innerHTML = info.intervals;
            solveConclusion.innerHTML = info.conclusion;

            buildFlow(solveFlow, currentScenario.flow);

            businessHighlights.innerHTML = info.highlights.map(item => `
                <div class="info-item">
                    <strong>${item.title}</strong>
                    <p>${item.content}</p>
                </div>
            `).join('');

            typeset();
        }

        function updateCaseSection() {
            const steps = [
                { title: 'è¯†åˆ«ç›®æ ‡', detail: 'ç¡®è®¤éœ€è¦æœ€å¤§åŒ–æ”¶ç›Šè¿˜æ˜¯æœ€å°åŒ–æˆæœ¬ï¼Œå¹¶å†™å‡ºå†³ç­–å˜é‡ã€‚' },
                { title: 'å‡½æ•°å»ºæ¨¡', detail: 'å°†æ”¶å…¥ã€æˆæœ¬æˆ–çº¦æŸç»Ÿä¸€æˆä¸€ä¸ªå¯å¯¼å‡½æ•°ã€‚' },
                { title: 'å¯¼æ•°åˆ†æ', detail: 'æ±‚ä¸€é˜¶å¯¼æ•°å®šä½ä¸´ç•Œç‚¹ï¼Œå†ç”¨äºŒé˜¶æˆ–å•è°ƒæ€§æ£€éªŒæœ€ä¼˜æ€§ã€‚' }
            ];
            buildFlow(caseFlow, steps);

            caseList.innerHTML = scenarios.map(item => `
                <div class="case-card">
                    <h4>${item.name}</h4>
                    <p>${item.description}</p>
                    <p>æ¨¡å‹ï¼š${item.formula}</p>
                    <p>å¯¼æ•°ï¼š${item.derivativeLatex}</p>
                </div>
            `).join('');
            typeset();
        }

        function updateScenario(id) {
            currentScenario = scenarios.find(item => item.id === id) || scenarios[0];
            setSliderRange(currentScenario.slider);
            sliderValue.textContent = formatNumber(parseFloat(slider.value));
            buildFlow(modelFlow, currentScenario.flow);
            updatePractice(currentScenario.practices);
            updateValueTable();
            updateCanvases();
            updateScenarioStatus(parseFloat(slider.value));
            updateSolveSection();
            highlightClosestRow(parseFloat(slider.value));
            typeset();
        }

        function handleSliderChange() {
            const value = parseFloat(slider.value);
            sliderValue.textContent = formatNumber(value);
            updateScenarioStatus(value);
            highlightClosestRow(value);
        }

        function playFlow() {
            if (playTimer) {
                clearInterval(playTimer);
            }
            const steps = modelFlow.querySelectorAll('.flow-step');
            steps.forEach(step => step.classList.remove('active'));
            let index = 0;
            playTimer = setInterval(() => {
                steps.forEach(step => step.classList.remove('active'));
                if (index < steps.length) {
                    steps[index].classList.add('active');
                    index += 1;
                } else {
                    clearInterval(playTimer);
                }
            }, 900);
        }

        function resetScenario() {
            setSliderRange(currentScenario.slider);
            sliderValue.textContent = formatNumber(parseFloat(slider.value));
            updateScenarioStatus(parseFloat(slider.value));
            highlightClosestRow(parseFloat(slider.value));
            updateCanvases();
        }

        function checkAnswer() {
            const userValue = parseFloat(answerInput.value);
            if (Number.isNaN(userValue)) {
                answerStatus.textContent = 'è¯·è¾“å…¥ä¸€ä¸ªæ•°å€¼ï¼Œå†ç‚¹å‡»éªŒè¯ã€‚';
                return;
            }
            const diff = Math.abs(userValue - currentScenario.optimum);
            const tolerance = Math.max(parseFloat(currentScenario.slider.step) * 1.5, 0.05);
            if (diff <= tolerance) {
                answerStatus.textContent = 'âœ… åˆ¤æ–­æ­£ç¡®ï¼è¯¥å€¼ä¸ç³»ç»Ÿè®¡ç®—çš„æœ€ä¼˜è§£ååˆ†æ¥è¿‘ã€‚';
            } else if (diff <= tolerance * 3) {
                answerStatus.textContent = 'âš ï¸ å·²ç»æ¥è¿‘æœ€ä¼˜è§£äº†ï¼Œå†ç»“åˆå¯¼æ•°ç¬¦å·ç»†è°ƒä¸€ä¸‹ã€‚';
            } else {
                answerStatus.textContent = 'âŒ ç»“æœåå·®è¾ƒå¤§ï¼Œæ£€æŸ¥æ˜¯å¦æ­£ç¡®è§£æ–¹ç¨‹æˆ–è€ƒè™‘äº†è¾¹ç•Œã€‚';
            }
        }

        function showAnswer() {
            const optimalValue = formatNumber(currentScenario.optimum);
            const { value } = evaluateScenario(currentScenario.optimum);
            answerStatus.innerHTML = `å‚è€ƒç­”æ¡ˆï¼š$x \approx ${optimalValue}$ï¼Œæ­¤æ—¶ $f(x) \approx ${formatNumber(value)}${currentScenario.units}$.`;
            typeset();
        }

        function bindEvents() {
            navButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const target = button.dataset.target;
                    navButtons.forEach(btn => btn.classList.toggle('active', btn === button));
                    pages.forEach(page => page.classList.toggle('active', page.id === target));
                });
            });

            scenarioSelect.addEventListener('change', event => {
                updateScenario(event.target.value);
            });

            slider.addEventListener('input', handleSliderChange);
            playFlowBtn.addEventListener('click', playFlow);
            resetBtn.addEventListener('click', resetScenario);
            checkAnswerBtn.addEventListener('click', checkAnswer);
            showAnswerBtn.addEventListener('click', showAnswer);
        }

        function init() {
            populateScenarioOptions();
            updateScenario(currentScenario.id);
            updateCaseSection();
            bindEvents();
            handleSliderChange();
        }

        init();
    </script>
</body>
</html>
